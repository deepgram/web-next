import { c as createAstro, a as createComponent, r as renderTemplate, b as renderHead } from '../entry.mjs';
import Slugger from 'github-slugger';
import '@astrojs/netlify/netlify-functions.js';
import 'preact';
import 'preact-render-to-string';
import 'vue';
import 'vue/server-renderer';
import 'html-escaper';
import 'node-html-parser';
import 'axios';
/* empty css                           *//* empty css                           *//* empty css                           */import '@storyblok/js';
/* empty css                           *//* empty css                          */import 'clone-deep';
import 'slugify';
import 'shiki';
/* empty css                           */import 'camelcase';
import '@astrojs/rss';
/* empty css                           */import 'mime';
import 'cookie';
import 'kleur/colors';
import 'string-width';
import 'path-browserify';
import 'path-to-regexp';

const metadata = { "headings": [{ "depth": 2, "slug": "trigger-your-workflow-when-new-episodes-are-released", "text": "Trigger Your Workflow When New Episodes Are Released" }, { "depth": 2, "slug": "transcribe-podcast-with-python", "text": "Transcribe Podcast With Python" }, { "depth": 2, "slug": "send-email-with-transcript", "text": "Send Email With Transcript" }], "source": '\nI love podcasts, but I rarely find the time to listen to all the new episodes of the ones I love. However, I often find time to read an article or newsletter so I thought it would be fun to automatically transcribe new episodes and send myself the output via email.\n\nWe\'ll be using Pipedream - an online workflow builder that integrates with many services while allowing us to write code in Python, JavaScript, Go, and more. Each workflow has one trigger that starts it and any number of actions that can happen as a result.\n\nBefore you start, you will need a [Pipedream account](https://pipedream.com), a Google account, and a [free Deepgram API Key](https://console.deepgram.com/signup?jump=keys).\n\nCreate a new empty Pipedream workflow for this project.\n\n## Trigger Your Workflow When New Episodes Are Released\n\nAll Podcasts publish via a public RSS feed, which is updated whenever there is a new episode. Pipedream has a built-in trigger which will check every 15 minutes if a new item has been added.\n\nUse the \'New Item in RSS Feed\' trigger with any podcast RSS feed - you can use `https://feeds.buzzsprout.com/1976304.rss`, which is for the new Deepgram podcast [Voice of the Future](https://deepgram.com/voiceofthefuturepodcast/).\n\n![Trigger configuration showing a feed URL, timer, and an empty \'name\' textbox](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-create.png)\n\nClick **Create Source** and select the first event. This is representative of one podcast episode.\n\n![Select event shows a dropdown of items. The first reads "Can AI get a read on you"](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-select.png)\n\nOnce selected, you can see all of the data contained in that RSS feed entry - including the episode\'s metadata and direct media link. All of this data can be used in future steps within the workflow.\n\n![A large amount of JSON-formatted data abotu the episode. Lightly-highlighted is the direct media URL.](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-data.png)\n\n## Transcribe Podcast With Python\n\nCreate a new step (now an \'action\') that will be run whenever the workflow is triggered. Pick **Python -> Run Python Code**. In the **Configure** section, click **Add an App** and select **Deepgram**. Insert your API Key and save it before continuing.\n\n![Pipedream step showing a Deepgram account has been configured, with boilerplate code in the editor.](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/python-config.png)\n\nDelete all of the code except `def handler(pd: "pipedream"):`, which is the required function signature that will be executed when this step is reached in the workflow. Make sure you have indented your code underneath this line. Then, get the URL from the trigger and your Deepgram API Key from the configured app:\n\n```py\nurl = pd.steps["trigger"]["event"]["enclosures"][0]["url"]\ntoken = pd.inputs["deepgram"]["$auth"][\'api_key\']\n```\n\nAs mentioned above, Pipedream requires the `def handler(pd: "pipedream"):` signature for the main function in a Python step. Because of this, the asynchronous Deepgram Python SDK won\'t be usable in this context. Instead, we\'ll directly make an API request with the `requests` library.\n\nAt the very top of your code, add the following line:\n\n```py\nimport requests\n```\n\nThen, at the bottom of your `handler` function, prepare your Deepgram API request:\n\n```py\nlisten = "https://api.deepgram.com/v1/listen?tier=enhanced&punctuate=true&diarize=true&paragraphs=true"\nheaders = { "Authorization": f"Token {token}" }\njson = { "url": url }\n```\n\nThis request will use Deepgram\'s [enhanced tier](https://developers.deepgram.com/documentation/features/tier/), [diarization (speaker detection)](https://developers.deepgram.com/documentation/features/diarize/), and format the output using [punctuation](https://developers.deepgram.com/documentation/features/punctuate/) and [paragraphs](https://developers.deepgram.com/documentation/features/paragraphs/).\n\nNow that you are set up, make the request, extract the formatted response, and return the value:\n\n```py\nr = requests.post(listen, json=json, headers=headers)\nresponse = r.json()\ntranscript = response[\'results\'][\'channels\'][0][\'alternatives\'][0][\'paragraphs\'][\'transcript\']\nreturn transcript\n```\n\nFinal code:\n\n```py\nimport requests\ndef handler(pd: "pipedream"):\n  url = pd.steps["trigger"]["event"]["enclosures"][0]["url"]\n  token = pd.inputs["deepgram"]["$auth"][\'api_key\']\n  listen = "https://api.deepgram.com/v1/listen?tier=enhanced&punctuate=true&diarize=true&paragraphs=true"\n  headers = { "Authorization": f"Token {token}" }\n  json = { "url": url }\n  r = requests.post(listen, json=json, headers=headers)\n  response = r.json()\n  transcript = response[\'results\'][\'channels\'][0][\'alternatives\'][0][\'paragraphs\'][\'transcript\']\n  return transcript\n```\n\nClick **Test** and the URL from the trigger will be sent to Deepgram, and the returned value will be shown in Pipedream:\n\n![A formatted transcript is shown in Pipdream\'s \'Exports\' section for the Python step. In it is a set of paragraphs each starting with \'\'](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/python-data.png)\n\n## Send Email With Transcript\n\nNow a transcript has been automatically generated, you can do anything with it - either through Pipedream\'s integrations or by adding another Python step. As mentioned at the start of this post, the outcome of this project is to send yourself an email with the content of the podcast. You can also include variables in the subject line.\n\nAdd a **Send Email To Self** step, and set the subject line to:\n\n```\nNew episode of {{steps.trigger.event.meta.title}}: {{steps.trigger.event.title}}\n```\n\nSet the text to:\n\n```\nEpisode description: {{steps.trigger.event.description}}\\n\\n{{steps.python.$return_value}}\n```\n\nIt should look like the following:\n\n![A send email to self step with a subject line and text containing variables](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/email-config.png)\n\nTest the step, and you should receive an email in just a few seconds. Deploy the workflow, and enjoy reading new podcast episodes. If you have questions about anything in this post, we\u2019d love to hear from you. Head over to [our forum](https://github.com/orgs/deepgram/discussions/categories/q-a) and create a new discussion with your questions, or send us a tweet [@DeepgramAI](https://twitter.com/DeepgramAI)', "html": '<p>I love podcasts, but I rarely find the time to listen to all the new episodes of the ones I love. However, I often find time to read an article or newsletter so I thought it would be fun to automatically transcribe new episodes and send myself the output via email.</p>\n<p>We\u2019ll be using Pipedream - an online workflow builder that integrates with many services while allowing us to write code in Python, JavaScript, Go, and more. Each workflow has one trigger that starts it and any number of actions that can happen as a result.</p>\n<p>Before you start, you will need a <a href="https://pipedream.com">Pipedream account</a>, a Google account, and a <a href="https://console.deepgram.com/signup?jump=keys">free Deepgram API Key</a>.</p>\n<p>Create a new empty Pipedream workflow for this project.</p>\n<h2 id="trigger-your-workflow-when-new-episodes-are-released">Trigger Your Workflow When New Episodes Are Released</h2>\n<p>All Podcasts publish via a public RSS feed, which is updated whenever there is a new episode. Pipedream has a built-in trigger which will check every 15 minutes if a new item has been added.</p>\n<p>Use the \u2018New Item in RSS Feed\u2019 trigger with any podcast RSS feed - you can use <code is:raw>https://feeds.buzzsprout.com/1976304.rss</code>, which is for the new Deepgram podcast <a href="https://deepgram.com/voiceofthefuturepodcast/">Voice of the Future</a>.</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-create.png" alt="Trigger configuration showing a feed URL, timer, and an empty &#x27;name&#x27; textbox"></p>\n<p>Click <strong>Create Source</strong> and select the first event. This is representative of one podcast episode.</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-select.png" alt="Select event shows a dropdown of items. The first reads &#x22;Can AI get a read on you&#x22;"></p>\n<p>Once selected, you can see all of the data contained in that RSS feed entry - including the episode\u2019s metadata and direct media link. All of this data can be used in future steps within the workflow.</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-data.png" alt="A large amount of JSON-formatted data abotu the episode. Lightly-highlighted is the direct media URL."></p>\n<h2 id="transcribe-podcast-with-python">Transcribe Podcast With Python</h2>\n<p>Create a new step (now an \u2018action\u2019) that will be run whenever the workflow is triggered. Pick <strong>Python -> Run Python Code</strong>. In the <strong>Configure</strong> section, click <strong>Add an App</strong> and select <strong>Deepgram</strong>. Insert your API Key and save it before continuing.</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/python-config.png" alt="Pipedream step showing a Deepgram account has been configured, with boilerplate code in the editor."></p>\n<p>Delete all of the code except <code is:raw>def handler(pd: "pipedream"):</code>, which is the required function signature that will be executed when this step is reached in the workflow. Make sure you have indented your code underneath this line. Then, get the URL from the trigger and your Deepgram API Key from the configured app:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">url </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.steps[</span><span style="color: #A5D6FF">&quot;trigger&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;event&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;enclosures&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #C9D1D9">token </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.inputs[</span><span style="color: #A5D6FF">&quot;deepgram&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;$auth&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;api_key&#39;</span><span style="color: #C9D1D9">]</span></span></code></pre>\n<p>As mentioned above, Pipedream requires the <code is:raw>def handler(pd: "pipedream"):</code> signature for the main function in a Python step. Because of this, the asynchronous Deepgram Python SDK won\u2019t be usable in this context. Instead, we\u2019ll directly make an API request with the <code is:raw>requests</code> library.</p>\n<p>At the very top of your code, add the following line:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> requests</span></span></code></pre>\n<p>Then, at the bottom of your <code is:raw>handler</code> function, prepare your Deepgram API request:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">listen </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">&quot;https://api.deepgram.com/v1/listen?tier=enhanced&amp;punctuate=true&amp;diarize=true&amp;paragraphs=true&quot;</span></span>\n<span class="line"><span style="color: #C9D1D9">headers </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;Authorization&quot;</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">f</span><span style="color: #A5D6FF">&quot;Token </span><span style="color: #79C0FF">{</span><span style="color: #C9D1D9">token</span><span style="color: #79C0FF">}</span><span style="color: #A5D6FF">&quot;</span><span style="color: #C9D1D9"> }</span></span>\n<span class="line"><span style="color: #C9D1D9">json </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">: url }</span></span></code></pre>\n<p>This request will use Deepgram\u2019s <a href="https://developers.deepgram.com/documentation/features/tier/">enhanced tier</a>, <a href="https://developers.deepgram.com/documentation/features/diarize/">diarization (speaker detection)</a>, and format the output using <a href="https://developers.deepgram.com/documentation/features/punctuate/">punctuation</a> and <a href="https://developers.deepgram.com/documentation/features/paragraphs/">paragraphs</a>.</p>\n<p>Now that you are set up, make the request, extract the formatted response, and return the value:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">r </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> requests.post(listen, </span><span style="color: #FFA657">json</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">json, </span><span style="color: #FFA657">headers</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">headers)</span></span>\n<span class="line"><span style="color: #C9D1D9">response </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> r.json()</span></span>\n<span class="line"><span style="color: #C9D1D9">transcript </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> response[</span><span style="color: #A5D6FF">&#39;results&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;channels&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;alternatives&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;paragraphs&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;transcript&#39;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> transcript</span></span></code></pre>\n<p>Final code:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> requests</span></span>\n<span class="line"><span style="color: #FF7B72">def</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">handler</span><span style="color: #C9D1D9">(pd: </span><span style="color: #A5D6FF">&quot;pipedream&quot;</span><span style="color: #C9D1D9">):</span></span>\n<span class="line"><span style="color: #C9D1D9">  url </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.steps[</span><span style="color: #A5D6FF">&quot;trigger&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;event&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;enclosures&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #C9D1D9">  token </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.inputs[</span><span style="color: #A5D6FF">&quot;deepgram&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;$auth&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;api_key&#39;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #C9D1D9">  listen </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">&quot;https://api.deepgram.com/v1/listen?tier=enhanced&amp;punctuate=true&amp;diarize=true&amp;paragraphs=true&quot;</span></span>\n<span class="line"><span style="color: #C9D1D9">  headers </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;Authorization&quot;</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">f</span><span style="color: #A5D6FF">&quot;Token </span><span style="color: #79C0FF">{</span><span style="color: #C9D1D9">token</span><span style="color: #79C0FF">}</span><span style="color: #A5D6FF">&quot;</span><span style="color: #C9D1D9"> }</span></span>\n<span class="line"><span style="color: #C9D1D9">  json </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">: url }</span></span>\n<span class="line"><span style="color: #C9D1D9">  r </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> requests.post(listen, </span><span style="color: #FFA657">json</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">json, </span><span style="color: #FFA657">headers</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">headers)</span></span>\n<span class="line"><span style="color: #C9D1D9">  response </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> r.json()</span></span>\n<span class="line"><span style="color: #C9D1D9">  transcript </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> response[</span><span style="color: #A5D6FF">&#39;results&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;channels&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;alternatives&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;paragraphs&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;transcript&#39;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> transcript</span></span></code></pre>\n<p>Click <strong>Test</strong> and the URL from the trigger will be sent to Deepgram, and the returned value will be shown in Pipedream:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/python-data.png" alt="A formatted transcript is shown in Pipdream&#x27;s &#x27;Exports&#x27; section for the Python step. In it is a set of paragraphs each starting with &#x27;&#x27;"></p>\n<h2 id="send-email-with-transcript">Send Email With Transcript</h2>\n<p>Now a transcript has been automatically generated, you can do anything with it - either through Pipedream\u2019s integrations or by adding another Python step. As mentioned at the start of this post, the outcome of this project is to send yourself an email with the content of the podcast. You can also include variables in the subject line.</p>\n<p>Add a <strong>Send Email To Self</strong> step, and set the subject line to:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">New episode of {{steps.trigger.event.meta.title}}: {{steps.trigger.event.title}}</span></span></code></pre>\n<p>Set the text to:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">Episode description: {{steps.trigger.event.description}}\\n\\n{{steps.python.$return_value}}</span></span></code></pre>\n<p>It should look like the following:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/email-config.png" alt="A send email to self step with a subject line and text containing variables"></p>\n<p>Test the step, and you should receive an email in just a few seconds. Deploy the workflow, and enjoy reading new podcast episodes. If you have questions about anything in this post, we\u2019d love to hear from you. Head over to <a href="https://github.com/orgs/deepgram/discussions/categories/q-a">our forum</a> and create a new discussion with your questions, or send us a tweet <a href="https://twitter.com/DeepgramAI">@DeepgramAI</a></p>' };
const frontmatter = { "title": "Automatically Transcribing Podcast Episodes with Pipedream and Python", "description": "Learn how to automatically transcribe and email new podcast episodes as a newsletter with Deepgram's Speech Recognition API and Pipedream.", "date": "2022-09-09T18:59:15.762Z", "cover": "https://res.cloudinary.com/deepgram/image/upload/v1661981800/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/cover.jpg", "authors": ["kevin-lewis"], "category": "tutorial", "tags": ["python"], "shorturls": { "share": "https://dpgr.am/870760a", "twitter": "https://dpgr.am/aad9a28", "linkedin": "https://dpgr.am/6e3bb68", "reddit": "https://dpgr.am/51f5012", "facebook": "https://dpgr.am/4a3ecae" }, "astro": { "headings": [{ "depth": 2, "slug": "trigger-your-workflow-when-new-episodes-are-released", "text": "Trigger Your Workflow When New Episodes Are Released" }, { "depth": 2, "slug": "transcribe-podcast-with-python", "text": "Transcribe Podcast With Python" }, { "depth": 2, "slug": "send-email-with-transcript", "text": "Send Email With Transcript" }], "source": '\nI love podcasts, but I rarely find the time to listen to all the new episodes of the ones I love. However, I often find time to read an article or newsletter so I thought it would be fun to automatically transcribe new episodes and send myself the output via email.\n\nWe\'ll be using Pipedream - an online workflow builder that integrates with many services while allowing us to write code in Python, JavaScript, Go, and more. Each workflow has one trigger that starts it and any number of actions that can happen as a result.\n\nBefore you start, you will need a [Pipedream account](https://pipedream.com), a Google account, and a [free Deepgram API Key](https://console.deepgram.com/signup?jump=keys).\n\nCreate a new empty Pipedream workflow for this project.\n\n## Trigger Your Workflow When New Episodes Are Released\n\nAll Podcasts publish via a public RSS feed, which is updated whenever there is a new episode. Pipedream has a built-in trigger which will check every 15 minutes if a new item has been added.\n\nUse the \'New Item in RSS Feed\' trigger with any podcast RSS feed - you can use `https://feeds.buzzsprout.com/1976304.rss`, which is for the new Deepgram podcast [Voice of the Future](https://deepgram.com/voiceofthefuturepodcast/).\n\n![Trigger configuration showing a feed URL, timer, and an empty \'name\' textbox](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-create.png)\n\nClick **Create Source** and select the first event. This is representative of one podcast episode.\n\n![Select event shows a dropdown of items. The first reads "Can AI get a read on you"](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-select.png)\n\nOnce selected, you can see all of the data contained in that RSS feed entry - including the episode\'s metadata and direct media link. All of this data can be used in future steps within the workflow.\n\n![A large amount of JSON-formatted data abotu the episode. Lightly-highlighted is the direct media URL.](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-data.png)\n\n## Transcribe Podcast With Python\n\nCreate a new step (now an \'action\') that will be run whenever the workflow is triggered. Pick **Python -> Run Python Code**. In the **Configure** section, click **Add an App** and select **Deepgram**. Insert your API Key and save it before continuing.\n\n![Pipedream step showing a Deepgram account has been configured, with boilerplate code in the editor.](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/python-config.png)\n\nDelete all of the code except `def handler(pd: "pipedream"):`, which is the required function signature that will be executed when this step is reached in the workflow. Make sure you have indented your code underneath this line. Then, get the URL from the trigger and your Deepgram API Key from the configured app:\n\n```py\nurl = pd.steps["trigger"]["event"]["enclosures"][0]["url"]\ntoken = pd.inputs["deepgram"]["$auth"][\'api_key\']\n```\n\nAs mentioned above, Pipedream requires the `def handler(pd: "pipedream"):` signature for the main function in a Python step. Because of this, the asynchronous Deepgram Python SDK won\'t be usable in this context. Instead, we\'ll directly make an API request with the `requests` library.\n\nAt the very top of your code, add the following line:\n\n```py\nimport requests\n```\n\nThen, at the bottom of your `handler` function, prepare your Deepgram API request:\n\n```py\nlisten = "https://api.deepgram.com/v1/listen?tier=enhanced&punctuate=true&diarize=true&paragraphs=true"\nheaders = { "Authorization": f"Token {token}" }\njson = { "url": url }\n```\n\nThis request will use Deepgram\'s [enhanced tier](https://developers.deepgram.com/documentation/features/tier/), [diarization (speaker detection)](https://developers.deepgram.com/documentation/features/diarize/), and format the output using [punctuation](https://developers.deepgram.com/documentation/features/punctuate/) and [paragraphs](https://developers.deepgram.com/documentation/features/paragraphs/).\n\nNow that you are set up, make the request, extract the formatted response, and return the value:\n\n```py\nr = requests.post(listen, json=json, headers=headers)\nresponse = r.json()\ntranscript = response[\'results\'][\'channels\'][0][\'alternatives\'][0][\'paragraphs\'][\'transcript\']\nreturn transcript\n```\n\nFinal code:\n\n```py\nimport requests\ndef handler(pd: "pipedream"):\n  url = pd.steps["trigger"]["event"]["enclosures"][0]["url"]\n  token = pd.inputs["deepgram"]["$auth"][\'api_key\']\n  listen = "https://api.deepgram.com/v1/listen?tier=enhanced&punctuate=true&diarize=true&paragraphs=true"\n  headers = { "Authorization": f"Token {token}" }\n  json = { "url": url }\n  r = requests.post(listen, json=json, headers=headers)\n  response = r.json()\n  transcript = response[\'results\'][\'channels\'][0][\'alternatives\'][0][\'paragraphs\'][\'transcript\']\n  return transcript\n```\n\nClick **Test** and the URL from the trigger will be sent to Deepgram, and the returned value will be shown in Pipedream:\n\n![A formatted transcript is shown in Pipdream\'s \'Exports\' section for the Python step. In it is a set of paragraphs each starting with \'\'](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/python-data.png)\n\n## Send Email With Transcript\n\nNow a transcript has been automatically generated, you can do anything with it - either through Pipedream\'s integrations or by adding another Python step. As mentioned at the start of this post, the outcome of this project is to send yourself an email with the content of the podcast. You can also include variables in the subject line.\n\nAdd a **Send Email To Self** step, and set the subject line to:\n\n```\nNew episode of {{steps.trigger.event.meta.title}}: {{steps.trigger.event.title}}\n```\n\nSet the text to:\n\n```\nEpisode description: {{steps.trigger.event.description}}\\n\\n{{steps.python.$return_value}}\n```\n\nIt should look like the following:\n\n![A send email to self step with a subject line and text containing variables](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/email-config.png)\n\nTest the step, and you should receive an email in just a few seconds. Deploy the workflow, and enjoy reading new podcast episodes. If you have questions about anything in this post, we\u2019d love to hear from you. Head over to [our forum](https://github.com/orgs/deepgram/discussions/categories/q-a) and create a new discussion with your questions, or send us a tweet [@DeepgramAI](https://twitter.com/DeepgramAI)', "html": '<p>I love podcasts, but I rarely find the time to listen to all the new episodes of the ones I love. However, I often find time to read an article or newsletter so I thought it would be fun to automatically transcribe new episodes and send myself the output via email.</p>\n<p>We\u2019ll be using Pipedream - an online workflow builder that integrates with many services while allowing us to write code in Python, JavaScript, Go, and more. Each workflow has one trigger that starts it and any number of actions that can happen as a result.</p>\n<p>Before you start, you will need a <a href="https://pipedream.com">Pipedream account</a>, a Google account, and a <a href="https://console.deepgram.com/signup?jump=keys">free Deepgram API Key</a>.</p>\n<p>Create a new empty Pipedream workflow for this project.</p>\n<h2 id="trigger-your-workflow-when-new-episodes-are-released">Trigger Your Workflow When New Episodes Are Released</h2>\n<p>All Podcasts publish via a public RSS feed, which is updated whenever there is a new episode. Pipedream has a built-in trigger which will check every 15 minutes if a new item has been added.</p>\n<p>Use the \u2018New Item in RSS Feed\u2019 trigger with any podcast RSS feed - you can use <code is:raw>https://feeds.buzzsprout.com/1976304.rss</code>, which is for the new Deepgram podcast <a href="https://deepgram.com/voiceofthefuturepodcast/">Voice of the Future</a>.</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-create.png" alt="Trigger configuration showing a feed URL, timer, and an empty &#x27;name&#x27; textbox"></p>\n<p>Click <strong>Create Source</strong> and select the first event. This is representative of one podcast episode.</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-select.png" alt="Select event shows a dropdown of items. The first reads &#x22;Can AI get a read on you&#x22;"></p>\n<p>Once selected, you can see all of the data contained in that RSS feed entry - including the episode\u2019s metadata and direct media link. All of this data can be used in future steps within the workflow.</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-data.png" alt="A large amount of JSON-formatted data abotu the episode. Lightly-highlighted is the direct media URL."></p>\n<h2 id="transcribe-podcast-with-python">Transcribe Podcast With Python</h2>\n<p>Create a new step (now an \u2018action\u2019) that will be run whenever the workflow is triggered. Pick <strong>Python -> Run Python Code</strong>. In the <strong>Configure</strong> section, click <strong>Add an App</strong> and select <strong>Deepgram</strong>. Insert your API Key and save it before continuing.</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/python-config.png" alt="Pipedream step showing a Deepgram account has been configured, with boilerplate code in the editor."></p>\n<p>Delete all of the code except <code is:raw>def handler(pd: "pipedream"):</code>, which is the required function signature that will be executed when this step is reached in the workflow. Make sure you have indented your code underneath this line. Then, get the URL from the trigger and your Deepgram API Key from the configured app:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">url </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.steps[</span><span style="color: #A5D6FF">&quot;trigger&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;event&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;enclosures&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #C9D1D9">token </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.inputs[</span><span style="color: #A5D6FF">&quot;deepgram&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;$auth&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;api_key&#39;</span><span style="color: #C9D1D9">]</span></span></code></pre>\n<p>As mentioned above, Pipedream requires the <code is:raw>def handler(pd: "pipedream"):</code> signature for the main function in a Python step. Because of this, the asynchronous Deepgram Python SDK won\u2019t be usable in this context. Instead, we\u2019ll directly make an API request with the <code is:raw>requests</code> library.</p>\n<p>At the very top of your code, add the following line:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> requests</span></span></code></pre>\n<p>Then, at the bottom of your <code is:raw>handler</code> function, prepare your Deepgram API request:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">listen </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">&quot;https://api.deepgram.com/v1/listen?tier=enhanced&amp;punctuate=true&amp;diarize=true&amp;paragraphs=true&quot;</span></span>\n<span class="line"><span style="color: #C9D1D9">headers </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;Authorization&quot;</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">f</span><span style="color: #A5D6FF">&quot;Token </span><span style="color: #79C0FF">{</span><span style="color: #C9D1D9">token</span><span style="color: #79C0FF">}</span><span style="color: #A5D6FF">&quot;</span><span style="color: #C9D1D9"> }</span></span>\n<span class="line"><span style="color: #C9D1D9">json </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">: url }</span></span></code></pre>\n<p>This request will use Deepgram\u2019s <a href="https://developers.deepgram.com/documentation/features/tier/">enhanced tier</a>, <a href="https://developers.deepgram.com/documentation/features/diarize/">diarization (speaker detection)</a>, and format the output using <a href="https://developers.deepgram.com/documentation/features/punctuate/">punctuation</a> and <a href="https://developers.deepgram.com/documentation/features/paragraphs/">paragraphs</a>.</p>\n<p>Now that you are set up, make the request, extract the formatted response, and return the value:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">r </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> requests.post(listen, </span><span style="color: #FFA657">json</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">json, </span><span style="color: #FFA657">headers</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">headers)</span></span>\n<span class="line"><span style="color: #C9D1D9">response </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> r.json()</span></span>\n<span class="line"><span style="color: #C9D1D9">transcript </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> response[</span><span style="color: #A5D6FF">&#39;results&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;channels&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;alternatives&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;paragraphs&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;transcript&#39;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> transcript</span></span></code></pre>\n<p>Final code:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> requests</span></span>\n<span class="line"><span style="color: #FF7B72">def</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">handler</span><span style="color: #C9D1D9">(pd: </span><span style="color: #A5D6FF">&quot;pipedream&quot;</span><span style="color: #C9D1D9">):</span></span>\n<span class="line"><span style="color: #C9D1D9">  url </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.steps[</span><span style="color: #A5D6FF">&quot;trigger&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;event&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;enclosures&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #C9D1D9">  token </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.inputs[</span><span style="color: #A5D6FF">&quot;deepgram&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;$auth&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;api_key&#39;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #C9D1D9">  listen </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">&quot;https://api.deepgram.com/v1/listen?tier=enhanced&amp;punctuate=true&amp;diarize=true&amp;paragraphs=true&quot;</span></span>\n<span class="line"><span style="color: #C9D1D9">  headers </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;Authorization&quot;</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">f</span><span style="color: #A5D6FF">&quot;Token </span><span style="color: #79C0FF">{</span><span style="color: #C9D1D9">token</span><span style="color: #79C0FF">}</span><span style="color: #A5D6FF">&quot;</span><span style="color: #C9D1D9"> }</span></span>\n<span class="line"><span style="color: #C9D1D9">  json </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">: url }</span></span>\n<span class="line"><span style="color: #C9D1D9">  r </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> requests.post(listen, </span><span style="color: #FFA657">json</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">json, </span><span style="color: #FFA657">headers</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">headers)</span></span>\n<span class="line"><span style="color: #C9D1D9">  response </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> r.json()</span></span>\n<span class="line"><span style="color: #C9D1D9">  transcript </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> response[</span><span style="color: #A5D6FF">&#39;results&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;channels&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;alternatives&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;paragraphs&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;transcript&#39;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> transcript</span></span></code></pre>\n<p>Click <strong>Test</strong> and the URL from the trigger will be sent to Deepgram, and the returned value will be shown in Pipedream:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/python-data.png" alt="A formatted transcript is shown in Pipdream&#x27;s &#x27;Exports&#x27; section for the Python step. In it is a set of paragraphs each starting with &#x27;&#x27;"></p>\n<h2 id="send-email-with-transcript">Send Email With Transcript</h2>\n<p>Now a transcript has been automatically generated, you can do anything with it - either through Pipedream\u2019s integrations or by adding another Python step. As mentioned at the start of this post, the outcome of this project is to send yourself an email with the content of the podcast. You can also include variables in the subject line.</p>\n<p>Add a <strong>Send Email To Self</strong> step, and set the subject line to:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">New episode of {{steps.trigger.event.meta.title}}: {{steps.trigger.event.title}}</span></span></code></pre>\n<p>Set the text to:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">Episode description: {{steps.trigger.event.description}}\\n\\n{{steps.python.$return_value}}</span></span></code></pre>\n<p>It should look like the following:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/email-config.png" alt="A send email to self step with a subject line and text containing variables"></p>\n<p>Test the step, and you should receive an email in just a few seconds. Deploy the workflow, and enjoy reading new podcast episodes. If you have questions about anything in this post, we\u2019d love to hear from you. Head over to <a href="https://github.com/orgs/deepgram/discussions/categories/q-a">our forum</a> and create a new discussion with your questions, or send us a tweet <a href="https://twitter.com/DeepgramAI">@DeepgramAI</a></p>' }, "file": "/Users/sandrarodgers/web-next/blog/src/content/blog/posts/automatically-transcribing-podcast-episodes-with-pipedream-and-python/index.md" };
function rawContent() {
  return '\nI love podcasts, but I rarely find the time to listen to all the new episodes of the ones I love. However, I often find time to read an article or newsletter so I thought it would be fun to automatically transcribe new episodes and send myself the output via email.\n\nWe\'ll be using Pipedream - an online workflow builder that integrates with many services while allowing us to write code in Python, JavaScript, Go, and more. Each workflow has one trigger that starts it and any number of actions that can happen as a result.\n\nBefore you start, you will need a [Pipedream account](https://pipedream.com), a Google account, and a [free Deepgram API Key](https://console.deepgram.com/signup?jump=keys).\n\nCreate a new empty Pipedream workflow for this project.\n\n## Trigger Your Workflow When New Episodes Are Released\n\nAll Podcasts publish via a public RSS feed, which is updated whenever there is a new episode. Pipedream has a built-in trigger which will check every 15 minutes if a new item has been added.\n\nUse the \'New Item in RSS Feed\' trigger with any podcast RSS feed - you can use `https://feeds.buzzsprout.com/1976304.rss`, which is for the new Deepgram podcast [Voice of the Future](https://deepgram.com/voiceofthefuturepodcast/).\n\n![Trigger configuration showing a feed URL, timer, and an empty \'name\' textbox](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-create.png)\n\nClick **Create Source** and select the first event. This is representative of one podcast episode.\n\n![Select event shows a dropdown of items. The first reads "Can AI get a read on you"](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-select.png)\n\nOnce selected, you can see all of the data contained in that RSS feed entry - including the episode\'s metadata and direct media link. All of this data can be used in future steps within the workflow.\n\n![A large amount of JSON-formatted data abotu the episode. Lightly-highlighted is the direct media URL.](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-data.png)\n\n## Transcribe Podcast With Python\n\nCreate a new step (now an \'action\') that will be run whenever the workflow is triggered. Pick **Python -> Run Python Code**. In the **Configure** section, click **Add an App** and select **Deepgram**. Insert your API Key and save it before continuing.\n\n![Pipedream step showing a Deepgram account has been configured, with boilerplate code in the editor.](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/python-config.png)\n\nDelete all of the code except `def handler(pd: "pipedream"):`, which is the required function signature that will be executed when this step is reached in the workflow. Make sure you have indented your code underneath this line. Then, get the URL from the trigger and your Deepgram API Key from the configured app:\n\n```py\nurl = pd.steps["trigger"]["event"]["enclosures"][0]["url"]\ntoken = pd.inputs["deepgram"]["$auth"][\'api_key\']\n```\n\nAs mentioned above, Pipedream requires the `def handler(pd: "pipedream"):` signature for the main function in a Python step. Because of this, the asynchronous Deepgram Python SDK won\'t be usable in this context. Instead, we\'ll directly make an API request with the `requests` library.\n\nAt the very top of your code, add the following line:\n\n```py\nimport requests\n```\n\nThen, at the bottom of your `handler` function, prepare your Deepgram API request:\n\n```py\nlisten = "https://api.deepgram.com/v1/listen?tier=enhanced&punctuate=true&diarize=true&paragraphs=true"\nheaders = { "Authorization": f"Token {token}" }\njson = { "url": url }\n```\n\nThis request will use Deepgram\'s [enhanced tier](https://developers.deepgram.com/documentation/features/tier/), [diarization (speaker detection)](https://developers.deepgram.com/documentation/features/diarize/), and format the output using [punctuation](https://developers.deepgram.com/documentation/features/punctuate/) and [paragraphs](https://developers.deepgram.com/documentation/features/paragraphs/).\n\nNow that you are set up, make the request, extract the formatted response, and return the value:\n\n```py\nr = requests.post(listen, json=json, headers=headers)\nresponse = r.json()\ntranscript = response[\'results\'][\'channels\'][0][\'alternatives\'][0][\'paragraphs\'][\'transcript\']\nreturn transcript\n```\n\nFinal code:\n\n```py\nimport requests\ndef handler(pd: "pipedream"):\n  url = pd.steps["trigger"]["event"]["enclosures"][0]["url"]\n  token = pd.inputs["deepgram"]["$auth"][\'api_key\']\n  listen = "https://api.deepgram.com/v1/listen?tier=enhanced&punctuate=true&diarize=true&paragraphs=true"\n  headers = { "Authorization": f"Token {token}" }\n  json = { "url": url }\n  r = requests.post(listen, json=json, headers=headers)\n  response = r.json()\n  transcript = response[\'results\'][\'channels\'][0][\'alternatives\'][0][\'paragraphs\'][\'transcript\']\n  return transcript\n```\n\nClick **Test** and the URL from the trigger will be sent to Deepgram, and the returned value will be shown in Pipedream:\n\n![A formatted transcript is shown in Pipdream\'s \'Exports\' section for the Python step. In it is a set of paragraphs each starting with \'\'](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/python-data.png)\n\n## Send Email With Transcript\n\nNow a transcript has been automatically generated, you can do anything with it - either through Pipedream\'s integrations or by adding another Python step. As mentioned at the start of this post, the outcome of this project is to send yourself an email with the content of the podcast. You can also include variables in the subject line.\n\nAdd a **Send Email To Self** step, and set the subject line to:\n\n```\nNew episode of {{steps.trigger.event.meta.title}}: {{steps.trigger.event.title}}\n```\n\nSet the text to:\n\n```\nEpisode description: {{steps.trigger.event.description}}\\n\\n{{steps.python.$return_value}}\n```\n\nIt should look like the following:\n\n![A send email to self step with a subject line and text containing variables](https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/email-config.png)\n\nTest the step, and you should receive an email in just a few seconds. Deploy the workflow, and enjoy reading new podcast episodes. If you have questions about anything in this post, we\u2019d love to hear from you. Head over to [our forum](https://github.com/orgs/deepgram/discussions/categories/q-a) and create a new discussion with your questions, or send us a tweet [@DeepgramAI](https://twitter.com/DeepgramAI)';
}
function compiledContent() {
  return '<p>I love podcasts, but I rarely find the time to listen to all the new episodes of the ones I love. However, I often find time to read an article or newsletter so I thought it would be fun to automatically transcribe new episodes and send myself the output via email.</p>\n<p>We\u2019ll be using Pipedream - an online workflow builder that integrates with many services while allowing us to write code in Python, JavaScript, Go, and more. Each workflow has one trigger that starts it and any number of actions that can happen as a result.</p>\n<p>Before you start, you will need a <a href="https://pipedream.com">Pipedream account</a>, a Google account, and a <a href="https://console.deepgram.com/signup?jump=keys">free Deepgram API Key</a>.</p>\n<p>Create a new empty Pipedream workflow for this project.</p>\n<h2 id="trigger-your-workflow-when-new-episodes-are-released">Trigger Your Workflow When New Episodes Are Released</h2>\n<p>All Podcasts publish via a public RSS feed, which is updated whenever there is a new episode. Pipedream has a built-in trigger which will check every 15 minutes if a new item has been added.</p>\n<p>Use the \u2018New Item in RSS Feed\u2019 trigger with any podcast RSS feed - you can use <code is:raw>https://feeds.buzzsprout.com/1976304.rss</code>, which is for the new Deepgram podcast <a href="https://deepgram.com/voiceofthefuturepodcast/">Voice of the Future</a>.</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-create.png" alt="Trigger configuration showing a feed URL, timer, and an empty &#x27;name&#x27; textbox"></p>\n<p>Click <strong>Create Source</strong> and select the first event. This is representative of one podcast episode.</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-select.png" alt="Select event shows a dropdown of items. The first reads &#x22;Can AI get a read on you&#x22;"></p>\n<p>Once selected, you can see all of the data contained in that RSS feed entry - including the episode\u2019s metadata and direct media link. All of this data can be used in future steps within the workflow.</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-data.png" alt="A large amount of JSON-formatted data abotu the episode. Lightly-highlighted is the direct media URL."></p>\n<h2 id="transcribe-podcast-with-python">Transcribe Podcast With Python</h2>\n<p>Create a new step (now an \u2018action\u2019) that will be run whenever the workflow is triggered. Pick <strong>Python -> Run Python Code</strong>. In the <strong>Configure</strong> section, click <strong>Add an App</strong> and select <strong>Deepgram</strong>. Insert your API Key and save it before continuing.</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/python-config.png" alt="Pipedream step showing a Deepgram account has been configured, with boilerplate code in the editor."></p>\n<p>Delete all of the code except <code is:raw>def handler(pd: "pipedream"):</code>, which is the required function signature that will be executed when this step is reached in the workflow. Make sure you have indented your code underneath this line. Then, get the URL from the trigger and your Deepgram API Key from the configured app:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">url </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.steps[</span><span style="color: #A5D6FF">&quot;trigger&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;event&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;enclosures&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #C9D1D9">token </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.inputs[</span><span style="color: #A5D6FF">&quot;deepgram&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;$auth&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;api_key&#39;</span><span style="color: #C9D1D9">]</span></span></code></pre>\n<p>As mentioned above, Pipedream requires the <code is:raw>def handler(pd: "pipedream"):</code> signature for the main function in a Python step. Because of this, the asynchronous Deepgram Python SDK won\u2019t be usable in this context. Instead, we\u2019ll directly make an API request with the <code is:raw>requests</code> library.</p>\n<p>At the very top of your code, add the following line:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> requests</span></span></code></pre>\n<p>Then, at the bottom of your <code is:raw>handler</code> function, prepare your Deepgram API request:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">listen </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">&quot;https://api.deepgram.com/v1/listen?tier=enhanced&amp;punctuate=true&amp;diarize=true&amp;paragraphs=true&quot;</span></span>\n<span class="line"><span style="color: #C9D1D9">headers </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;Authorization&quot;</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">f</span><span style="color: #A5D6FF">&quot;Token </span><span style="color: #79C0FF">{</span><span style="color: #C9D1D9">token</span><span style="color: #79C0FF">}</span><span style="color: #A5D6FF">&quot;</span><span style="color: #C9D1D9"> }</span></span>\n<span class="line"><span style="color: #C9D1D9">json </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">: url }</span></span></code></pre>\n<p>This request will use Deepgram\u2019s <a href="https://developers.deepgram.com/documentation/features/tier/">enhanced tier</a>, <a href="https://developers.deepgram.com/documentation/features/diarize/">diarization (speaker detection)</a>, and format the output using <a href="https://developers.deepgram.com/documentation/features/punctuate/">punctuation</a> and <a href="https://developers.deepgram.com/documentation/features/paragraphs/">paragraphs</a>.</p>\n<p>Now that you are set up, make the request, extract the formatted response, and return the value:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">r </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> requests.post(listen, </span><span style="color: #FFA657">json</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">json, </span><span style="color: #FFA657">headers</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">headers)</span></span>\n<span class="line"><span style="color: #C9D1D9">response </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> r.json()</span></span>\n<span class="line"><span style="color: #C9D1D9">transcript </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> response[</span><span style="color: #A5D6FF">&#39;results&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;channels&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;alternatives&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;paragraphs&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;transcript&#39;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> transcript</span></span></code></pre>\n<p>Final code:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> requests</span></span>\n<span class="line"><span style="color: #FF7B72">def</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">handler</span><span style="color: #C9D1D9">(pd: </span><span style="color: #A5D6FF">&quot;pipedream&quot;</span><span style="color: #C9D1D9">):</span></span>\n<span class="line"><span style="color: #C9D1D9">  url </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.steps[</span><span style="color: #A5D6FF">&quot;trigger&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;event&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;enclosures&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #C9D1D9">  token </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.inputs[</span><span style="color: #A5D6FF">&quot;deepgram&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;$auth&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;api_key&#39;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #C9D1D9">  listen </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">&quot;https://api.deepgram.com/v1/listen?tier=enhanced&amp;punctuate=true&amp;diarize=true&amp;paragraphs=true&quot;</span></span>\n<span class="line"><span style="color: #C9D1D9">  headers </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;Authorization&quot;</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">f</span><span style="color: #A5D6FF">&quot;Token </span><span style="color: #79C0FF">{</span><span style="color: #C9D1D9">token</span><span style="color: #79C0FF">}</span><span style="color: #A5D6FF">&quot;</span><span style="color: #C9D1D9"> }</span></span>\n<span class="line"><span style="color: #C9D1D9">  json </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">: url }</span></span>\n<span class="line"><span style="color: #C9D1D9">  r </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> requests.post(listen, </span><span style="color: #FFA657">json</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">json, </span><span style="color: #FFA657">headers</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">headers)</span></span>\n<span class="line"><span style="color: #C9D1D9">  response </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> r.json()</span></span>\n<span class="line"><span style="color: #C9D1D9">  transcript </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> response[</span><span style="color: #A5D6FF">&#39;results&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;channels&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;alternatives&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;paragraphs&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;transcript&#39;</span><span style="color: #C9D1D9">]</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> transcript</span></span></code></pre>\n<p>Click <strong>Test</strong> and the URL from the trigger will be sent to Deepgram, and the returned value will be shown in Pipedream:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/python-data.png" alt="A formatted transcript is shown in Pipdream&#x27;s &#x27;Exports&#x27; section for the Python step. In it is a set of paragraphs each starting with &#x27;&#x27;"></p>\n<h2 id="send-email-with-transcript">Send Email With Transcript</h2>\n<p>Now a transcript has been automatically generated, you can do anything with it - either through Pipedream\u2019s integrations or by adding another Python step. As mentioned at the start of this post, the outcome of this project is to send yourself an email with the content of the podcast. You can also include variables in the subject line.</p>\n<p>Add a <strong>Send Email To Self</strong> step, and set the subject line to:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">New episode of {{steps.trigger.event.meta.title}}: {{steps.trigger.event.title}}</span></span></code></pre>\n<p>Set the text to:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">Episode description: {{steps.trigger.event.description}}\\n\\n{{steps.python.$return_value}}</span></span></code></pre>\n<p>It should look like the following:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/email-config.png" alt="A send email to self step with a subject line and text containing variables"></p>\n<p>Test the step, and you should receive an email in just a few seconds. Deploy the workflow, and enjoy reading new podcast episodes. If you have questions about anything in this post, we\u2019d love to hear from you. Head over to <a href="https://github.com/orgs/deepgram/discussions/categories/q-a">our forum</a> and create a new discussion with your questions, or send us a tweet <a href="https://twitter.com/DeepgramAI">@DeepgramAI</a></p>';
}
const $$Astro = createAstro("/Users/sandrarodgers/web-next/blog/src/content/blog/posts/automatically-transcribing-podcast-episodes-with-pipedream-and-python/index.md", "", "file:///Users/sandrarodgers/web-next/blog/");
const $$Index = createComponent(async ($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$Index;
  new Slugger();
  return renderTemplate`<head>${renderHead($$result)}</head><p>I love podcasts, but I rarely find the time to listen to all the new episodes of the ones I love. However, I often find time to read an article or newsletter so I thought it would be fun to automatically transcribe new episodes and send myself the output via email.</p>
<p>Well be using Pipedream - an online workflow builder that integrates with many services while allowing us to write code in Python, JavaScript, Go, and more. Each workflow has one trigger that starts it and any number of actions that can happen as a result.</p>
<p>Before you start, you will need a <a href="https://pipedream.com">Pipedream account</a>, a Google account, and a <a href="https://console.deepgram.com/signup?jump=keys">free Deepgram API Key</a>.</p>
<p>Create a new empty Pipedream workflow for this project.</p>
<h2 id="trigger-your-workflow-when-new-episodes-are-released">Trigger Your Workflow When New Episodes Are Released</h2>
<p>All Podcasts publish via a public RSS feed, which is updated whenever there is a new episode. Pipedream has a built-in trigger which will check every 15 minutes if a new item has been added.</p>
<p>Use the New Item in RSS Feed trigger with any podcast RSS feed - you can use <code>https://feeds.buzzsprout.com/1976304.rss</code>, which is for the new Deepgram podcast <a href="https://deepgram.com/voiceofthefuturepodcast/">Voice of the Future</a>.</p>
<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-create.png" alt="Trigger configuration showing a feed URL, timer, and an empty 'name' textbox"></p>
<p>Click <strong>Create Source</strong> and select the first event. This is representative of one podcast episode.</p>
<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-select.png" alt="Select event shows a dropdown of items. The first reads &quot;Can AI get a read on you&quot;"></p>
<p>Once selected, you can see all of the data contained in that RSS feed entry - including the episodes metadata and direct media link. All of this data can be used in future steps within the workflow.</p>
<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/trigger-data.png" alt="A large amount of JSON-formatted data abotu the episode. Lightly-highlighted is the direct media URL."></p>
<h2 id="transcribe-podcast-with-python">Transcribe Podcast With Python</h2>
<p>Create a new step (now an action) that will be run whenever the workflow is triggered. Pick <strong>Python -> Run Python Code</strong>. In the <strong>Configure</strong> section, click <strong>Add an App</strong> and select <strong>Deepgram</strong>. Insert your API Key and save it before continuing.</p>
<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/python-config.png" alt="Pipedream step showing a Deepgram account has been configured, with boilerplate code in the editor."></p>
<p>Delete all of the code except <code>def handler(pd: "pipedream"):</code>, which is the required function signature that will be executed when this step is reached in the workflow. Make sure you have indented your code underneath this line. Then, get the URL from the trigger and your Deepgram API Key from the configured app:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">url </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.steps[</span><span style="color: #A5D6FF">&quot;trigger&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;event&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;enclosures&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">]</span></span>
<span class="line"><span style="color: #C9D1D9">token </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.inputs[</span><span style="color: #A5D6FF">&quot;deepgram&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;$auth&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;api_key&#39;</span><span style="color: #C9D1D9">]</span></span></code></pre>
<p>As mentioned above, Pipedream requires the <code>def handler(pd: "pipedream"):</code> signature for the main function in a Python step. Because of this, the asynchronous Deepgram Python SDK wont be usable in this context. Instead, well directly make an API request with the <code>requests</code> library.</p>
<p>At the very top of your code, add the following line:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> requests</span></span></code></pre>
<p>Then, at the bottom of your <code>handler</code> function, prepare your Deepgram API request:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">listen </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">&quot;https://api.deepgram.com/v1/listen?tier=enhanced&amp;punctuate=true&amp;diarize=true&amp;paragraphs=true&quot;</span></span>
<span class="line"><span style="color: #C9D1D9">headers </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;Authorization&quot;</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">f</span><span style="color: #A5D6FF">&quot;Token </span><span style="color: #79C0FF">{</span><span style="color: #C9D1D9">token</span><span style="color: #79C0FF">}</span><span style="color: #A5D6FF">&quot;</span><span style="color: #C9D1D9"> }</span></span>
<span class="line"><span style="color: #C9D1D9">json </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">: url }</span></span></code></pre>
<p>This request will use Deepgrams <a href="https://developers.deepgram.com/documentation/features/tier/">enhanced tier</a>, <a href="https://developers.deepgram.com/documentation/features/diarize/">diarization (speaker detection)</a>, and format the output using <a href="https://developers.deepgram.com/documentation/features/punctuate/">punctuation</a> and <a href="https://developers.deepgram.com/documentation/features/paragraphs/">paragraphs</a>.</p>
<p>Now that you are set up, make the request, extract the formatted response, and return the value:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">r </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> requests.post(listen, </span><span style="color: #FFA657">json</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">json, </span><span style="color: #FFA657">headers</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">headers)</span></span>
<span class="line"><span style="color: #C9D1D9">response </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> r.json()</span></span>
<span class="line"><span style="color: #C9D1D9">transcript </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> response[</span><span style="color: #A5D6FF">&#39;results&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;channels&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;alternatives&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;paragraphs&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;transcript&#39;</span><span style="color: #C9D1D9">]</span></span>
<span class="line"><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> transcript</span></span></code></pre>
<p>Final code:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> requests</span></span>
<span class="line"><span style="color: #FF7B72">def</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">handler</span><span style="color: #C9D1D9">(pd: </span><span style="color: #A5D6FF">&quot;pipedream&quot;</span><span style="color: #C9D1D9">):</span></span>
<span class="line"><span style="color: #C9D1D9">  url </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.steps[</span><span style="color: #A5D6FF">&quot;trigger&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;event&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;enclosures&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">]</span></span>
<span class="line"><span style="color: #C9D1D9">  token </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> pd.inputs[</span><span style="color: #A5D6FF">&quot;deepgram&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&quot;$auth&quot;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;api_key&#39;</span><span style="color: #C9D1D9">]</span></span>
<span class="line"><span style="color: #C9D1D9">  listen </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">&quot;https://api.deepgram.com/v1/listen?tier=enhanced&amp;punctuate=true&amp;diarize=true&amp;paragraphs=true&quot;</span></span>
<span class="line"><span style="color: #C9D1D9">  headers </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;Authorization&quot;</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">f</span><span style="color: #A5D6FF">&quot;Token </span><span style="color: #79C0FF">{</span><span style="color: #C9D1D9">token</span><span style="color: #79C0FF">}</span><span style="color: #A5D6FF">&quot;</span><span style="color: #C9D1D9"> }</span></span>
<span class="line"><span style="color: #C9D1D9">  json </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { </span><span style="color: #A5D6FF">&quot;url&quot;</span><span style="color: #C9D1D9">: url }</span></span>
<span class="line"><span style="color: #C9D1D9">  r </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> requests.post(listen, </span><span style="color: #FFA657">json</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">json, </span><span style="color: #FFA657">headers</span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9">headers)</span></span>
<span class="line"><span style="color: #C9D1D9">  response </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> r.json()</span></span>
<span class="line"><span style="color: #C9D1D9">  transcript </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> response[</span><span style="color: #A5D6FF">&#39;results&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;channels&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;alternatives&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;paragraphs&#39;</span><span style="color: #C9D1D9">][</span><span style="color: #A5D6FF">&#39;transcript&#39;</span><span style="color: #C9D1D9">]</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> transcript</span></span></code></pre>
<p>Click <strong>Test</strong> and the URL from the trigger will be sent to Deepgram, and the returned value will be shown in Pipedream:</p>
<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/python-data.png" alt="A formatted transcript is shown in Pipdream's 'Exports' section for the Python step. In it is a set of paragraphs each starting with ''"></p>
<h2 id="send-email-with-transcript">Send Email With Transcript</h2>
<p>Now a transcript has been automatically generated, you can do anything with it - either through Pipedreams integrations or by adding another Python step. As mentioned at the start of this post, the outcome of this project is to send yourself an email with the content of the podcast. You can also include variables in the subject line.</p>
<p>Add a <strong>Send Email To Self</strong> step, and set the subject line to:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">New episode of {{steps.trigger.event.meta.title}}: {{steps.trigger.event.title}}</span></span></code></pre>
<p>Set the text to:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">Episode description: {{steps.trigger.event.description}}\\n\\n{{steps.python.$return_value}}</span></span></code></pre>
<p>It should look like the following:</p>
<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1661981806/blog/2022/09/automatically-transcribe-new-podcasts-pipedream-python/email-config.png" alt="A send email to self step with a subject line and text containing variables"></p>
<p>Test the step, and you should receive an email in just a few seconds. Deploy the workflow, and enjoy reading new podcast episodes. If you have questions about anything in this post, wed love to hear from you. Head over to <a href="https://github.com/orgs/deepgram/discussions/categories/q-a">our forum</a> and create a new discussion with your questions, or send us a tweet <a href="https://twitter.com/DeepgramAI">@DeepgramAI</a></p>`;
}, "/Users/sandrarodgers/web-next/blog/src/content/blog/posts/automatically-transcribing-podcast-episodes-with-pipedream-and-python/index.md");

export { compiledContent, $$Index as default, frontmatter, metadata, rawContent };

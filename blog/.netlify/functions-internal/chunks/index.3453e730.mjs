import { c as createAstro, a as createComponent, r as renderTemplate, b as renderHead } from '../entry.mjs';
import Slugger from 'github-slugger';
import '@astrojs/netlify/netlify-functions.js';
import 'preact';
import 'preact-render-to-string';
import 'vue';
import 'vue/server-renderer';
import 'html-escaper';
import 'node-html-parser';
/* empty css                           */import 'axios';
/* empty css                          *//* empty css                           *//* empty css                          *//* empty css                              *//* empty css                              */import 'clone-deep';
import 'slugify';
import 'shiki';
/* empty css                           *//* empty css                              */import '@astrojs/rss';
/* empty css                           */import 'mime';
import 'cookie';
import 'kleur/colors';
import 'string-width';
import 'path-browserify';
import 'path-to-regexp';

const metadata = { "headings": [{ "depth": 2, "slug": "setup", "text": "Setup" }, { "depth": 2, "slug": "using-the-tool", "text": "Using the Tool" }, { "depth": 2, "slug": "deepgrams-whisper-api-endpoint", "text": "Deepgram\u2019s Whisper API Endpoint" }, { "depth": 2, "slug": "but-wait-those-transcripts-arent-the-same", "text": "But Wait. Those Transcripts Aren\u2019t the Same." }], "source": "So, you want to run the OpenAI Whisper tool on your machine? You can load it from the [OpenAI Github](https://github.com/openai/whisper) repository to get up and going!\n\n## Setup\n\nYou'll need python on your machine, at least version 3.7. Let's set up a [virtual environment](https://realpython.com/python-virtual-environments-a-primer/) with venv (or conda or the like) if you want to isolate these experiments from other work.\n\n```shell\nmkdir whisper\ncd whisper\npython3 -m venv venv\nsource venv/bin/activate\n\n# always a good idea to make sure pip is up-to-date\npip3 install --upgrade pip\n```\n\nNext, install a clone of the Whisper package and its dependencies (torch, numpy, transformers, tqdm, more-itertools, and ffmpeg-python) into your python environment.\n\n```shell\npip3 install git+https://github.com/openai/whisper.git\n```\n\nEspecially if it's pulling `torch` for the first time, this may take a little while. The repository documentation advises that if you get errors building the wheel for `tokenizers`, you may also need to install `rust`. You'll also need `ffmpeg` - installation depends on your platform. Here are some examples:\n\n```shell\n# on Ubuntu or Debian\nsudo apt update && sudo apt install ffmpeg\n\n# on Arch Linux\nsudo pacman -S ffmpeg\n\n# on MacOS using Homebrew (https://brew.sh/)\nbrew install ffmpeg\n\n# on Windows using Chocolatey (https://chocolatey.org/)\nchoco install ffmpeg\n\n# on Windows using Scoop (https://scoop.sh/)\nscoop install ffmpeg\n```\n\n## Using the Tool\n\nGreat! You're ready to transcribe! In this example, we're working with Nicholas Tesla's vision of a wireless future - you can get [this audio file at the LibriVox archive](https://www.archive.org/download/nonfiction025_librivox/snf025_nikolateslawirelessvision_anonymous_gu.mp3) of public-domain audiobooks and bring it to your local machine if you don't have something queued up and ready to go.\n\nThe OpenAI Whisper tool has a variety of models that are English-only or multilingual, and come in a range of sizes whose tradeoffs are speed vs. performance. You can learn more about this [here](https://github.com/openai/whisper#available-models-and-languages). We, the researchers at Deepgram, have found that the small model provides a good balance.\n\n```shell\nwhisper \"snf025_nikolateslawirelessvision_anonymous_gu.mp3\" --model small --language English\n```\n\n```shell\n[00:00.000 --> 00:09.880]  Nikola Tesla sees a wireless vision by Anonymous, the New York Times, 3rd October, 1915.\n[00:09.880 --> 00:11.920]  This is a LibriVox recording.\n[00:11.920 --> 00:14.920]  All LibriVox recordings are in the public domain.\n[00:14.920 --> 00:20.200]  For more information or to volunteer, please visit LibriVox.org.\n[00:20.200 --> 00:23.760]  Nikola Tesla sees a wireless vision.\n[00:23.760 --> 00:29.080]  Things his world system will allow hundreds to talk at once through the Earth.\n[00:29.080 --> 00:31.760]  Trans-static disturbance.\n[00:31.760 --> 00:37.480]  Inventor hopes also to transmit pictures by the same medium which carries the voice.\n[00:37.480 --> 00:43.880]  Nikola Tesla announced to the Times last night that he had received a patent on an invention\n[00:43.880 --> 00:50.320]  which would not only eliminate static interference, the present bugaboo of wireless telephony,\n[00:50.320 --> 00:55.520]  but would enable thousands of persons to talk at once between wireless stations and make\n[00:55.520 --> 01:01.920]  it possible for those talking to see one another by wireless regardless of the distance separating\n\n...\n\n[07:25.160 --> 07:30.520]  Wireless is coming to mankind in its full meaning like a hurricane some of these days.\n[07:30.520 --> 07:36.120]  Some day there will be, say, six great wireless telephone stations in a world system connecting\n[07:36.120 --> 07:42.080]  all the inhabitants on this earth to one another, not only by voice, but by sight.\n[07:42.080 --> 07:45.240]  Its surely coming.\n[07:45.240 --> 07:50.940]  End of Nikola Tesla sees a wireless vision by Anonymous, The New York Times, 3rd October\n[07:50.940 --> 08:13.840]  1915.\n```\n\n## Deepgram's Whisper API Endpoint\n\nGetting the Whisper tool working on your machine may require some fiddly work with dependencies - especially for Torch and any existing software running your GPU.  Our [OpenAI Whisper API endpoint](https://deepgram.com/openai-whisper/) is easy to work with on the command-line - you can use `curl` to quickly send audio to our API.\n\nThis call will send your file to the API and save it to a local JSON file called `n_tesla.json`:\n\n```shell\ncurl --request POST \\\n  --upload-file snf025_nikolateslawirelessvision_anonymous_gu.mp3 \\\n  --url 'https://api.deepgram.com/v1/listen?model=whisper' \\\n  --output n_tesla.json\n```\n\nThe JSON file is returned in Deepgram's format that offers the transcript as well as information about your transcription request. A quick way to view the transcript is to use the `jq` tool:\n\n```shell\njq .results.channels[0].alternatives[0].transcript n_tesla.json \n```\n\n...and here's your transcript!\n\n```text\n\"Nikola Tesla sees a wireless vision by anonymous the New York Times 3rd October 1915. This is a LeapRvox recording. All LeapRvox recordings are in the public domain. For more information or to volunteer, please visit LeapRvox.org. Nikola Tesla sees a wireless vision. Things his world system will allow hundreds to talk at once through the earth. Nikola Tesla responds static disturbance. Inventors hopes also to transmit pictures by the same medium which carries the voice. Nikola Tesla announced to the Times last night that he had received a patent on an invention which would not only eliminate static interference, the present bugaboo of wireless telephony, but would enable thousands of persons to talk at once between wireless stations and make it possible for those talking to see one another by wireless, regardless of the distance separating them. \n\n...\n\nWireless is coming to mankind, and it's full meaning like a hurricane some of these days. Some day there will be, say, six great wireless telephone stations in a world system, connecting all the inhabitants on this earth to one another, not only by voice, but by sight. It's surely coming. End of Nikola Tesla sees a wireless vision by anonymous, the New York Times 3rd October 1915.\"\n```\n\n## But Wait. Those Transcripts Aren't the Same.\n\nExcellent observation! The local run was able to transcribe \"LibriVox,\" while the API call returned \"LeapRvox.\" This is an artifact of this kind of model - their results are not deterministic. That is, some optimizations for working with large quantities of audio depend on overall system state and do not produce precisely the same output between runs. Our observations are that the resulting differential is typically on the order of 1% (absolute) fluctuations in word-error rate.", "html": '<p>So, you want to run the OpenAI Whisper tool on your machine? You can load it from the <a href="https://github.com/openai/whisper">OpenAI Github</a> repository to get up and going!</p>\n<h2 id="setup">Setup</h2>\n<p>You\u2019ll need python on your machine, at least version 3.7. Let\u2019s set up a <a href="https://realpython.com/python-virtual-environments-a-primer/">virtual environment</a> with venv (or conda or the like) if you want to isolate these experiments from other work.</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">mkdir whisper</span></span>\n<span class="line"><span style="color: #79C0FF">cd</span><span style="color: #C9D1D9"> whisper</span></span>\n<span class="line"><span style="color: #C9D1D9">python3 -m venv venv</span></span>\n<span class="line"><span style="color: #79C0FF">source</span><span style="color: #C9D1D9"> venv/bin/activate</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># always a good idea to make sure pip is up-to-date</span></span>\n<span class="line"><span style="color: #C9D1D9">pip3 install --upgrade pip</span></span></code></pre>\n<p>Next, install a clone of the Whisper package and its dependencies (torch, numpy, transformers, tqdm, more-itertools, and ffmpeg-python) into your python environment.</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">pip3 install git+https://github.com/openai/whisper.git</span></span></code></pre>\n<p>Especially if it\u2019s pulling <code is:raw>torch</code> for the first time, this may take a little while. The repository documentation advises that if you get errors building the wheel for <code is:raw>tokenizers</code>, you may also need to install <code is:raw>rust</code>. You\u2019ll also need <code is:raw>ffmpeg</code> - installation depends on your platform. Here are some examples:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #8B949E"># on Ubuntu or Debian</span></span>\n<span class="line"><span style="color: #C9D1D9">sudo apt update </span><span style="color: #FF7B72">&amp;&amp;</span><span style="color: #C9D1D9"> sudo apt install ffmpeg</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># on Arch Linux</span></span>\n<span class="line"><span style="color: #C9D1D9">sudo pacman -S ffmpeg</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># on MacOS using Homebrew (https://brew.sh/)</span></span>\n<span class="line"><span style="color: #C9D1D9">brew install ffmpeg</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># on Windows using Chocolatey (https://chocolatey.org/)</span></span>\n<span class="line"><span style="color: #C9D1D9">choco install ffmpeg</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># on Windows using Scoop (https://scoop.sh/)</span></span>\n<span class="line"><span style="color: #C9D1D9">scoop install ffmpeg</span></span></code></pre>\n<h2 id="using-the-tool">Using the Tool</h2>\n<p>Great! You\u2019re ready to transcribe! In this example, we\u2019re working with Nicholas Tesla\u2019s vision of a wireless future - you can get <a href="https://www.archive.org/download/nonfiction025_librivox/snf025_nikolateslawirelessvision_anonymous_gu.mp3">this audio file at the LibriVox archive</a> of public-domain audiobooks and bring it to your local machine if you don\u2019t have something queued up and ready to go.</p>\n<p>The OpenAI Whisper tool has a variety of models that are English-only or multilingual, and come in a range of sizes whose tradeoffs are speed vs. performance. You can learn more about this <a href="https://github.com/openai/whisper#available-models-and-languages">here</a>. We, the researchers at Deepgram, have found that the small model provides a good balance.</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">whisper </span><span style="color: #A5D6FF">&quot;snf025_nikolateslawirelessvision_anonymous_gu.mp3&quot;</span><span style="color: #C9D1D9"> --model small --language English</span></span></code></pre>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">[00:00.000 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:09.880]  Nikola Tesla sees a wireless vision by Anonymous, the New York Times, 3rd October, 1915.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:09.880 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:11.920]  This is a LibriVox recording.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:11.920 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:14.920]  All LibriVox recordings are </span><span style="color: #FF7B72">in</span><span style="color: #C9D1D9"> the public domain.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:14.920 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:20.200]  For more information or to volunteer, please visit LibriVox.org.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:20.200 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:23.760]  Nikola Tesla sees a wireless vision.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:23.760 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:29.080]  Things his world system will allow hundreds to talk at once through the Earth.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:29.080 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:31.760]  Trans-static disturbance.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:31.760 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:37.480]  Inventor hopes also to transmit pictures by the same medium which carries the voice.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:37.480 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:43.880]  Nikola Tesla announced to the Times last night that he had received a patent on an invention</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:43.880 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:50.320]  which would not only eliminate static interference, the present bugaboo of wireless telephony,</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:50.320 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:55.520]  but would </span><span style="color: #79C0FF">enable</span><span style="color: #C9D1D9"> thousands of persons to talk at once between wireless stations and make</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:55.520 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 01:01.920]  it possible </span><span style="color: #FF7B72">for</span><span style="color: #C9D1D9"> those talking to see one another by wireless regardless of the distance separating</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #C9D1D9">...</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #C9D1D9">[07:25.160 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:30.520]  Wireless is coming to mankind </span><span style="color: #FF7B72">in</span><span style="color: #C9D1D9"> its full meaning like a hurricane some of these days.</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:30.520 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:36.120]  Some day there will be, say, six great wireless telephone stations </span><span style="color: #FF7B72">in</span><span style="color: #C9D1D9"> a world system connecting</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:36.120 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:42.080]  all the inhabitants on this earth to one another, not only by voice, but by sight.</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:42.080 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:45.240]  Its surely coming.</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:45.240 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:50.940]  End of Nikola Tesla sees a wireless vision by Anonymous, The New York Times, 3rd October</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:50.940 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 08:13.840]  1915.</span></span></code></pre>\n<h2 id="deepgrams-whisper-api-endpoint">Deepgram\u2019s Whisper API Endpoint</h2>\n<p>Getting the Whisper tool working on your machine may require some fiddly work with dependencies - especially for Torch and any existing software running your GPU.  Our <a href="https://deepgram.com/openai-whisper/">OpenAI Whisper API endpoint</a> is easy to work with on the command-line - you can use <code is:raw>curl</code> to quickly send audio to our API.</p>\n<p>This call will send your file to the API and save it to a local JSON file called <code is:raw>n_tesla.json</code>:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">curl --request POST \\</span></span>\n<span class="line"><span style="color: #C9D1D9">  --upload-file snf025_nikolateslawirelessvision_anonymous_gu.mp3 \\</span></span>\n<span class="line"><span style="color: #C9D1D9">  --url </span><span style="color: #A5D6FF">&#39;https://api.deepgram.com/v1/listen?model=whisper&#39;</span><span style="color: #C9D1D9"> \\</span></span>\n<span class="line"><span style="color: #C9D1D9">  --output n_tesla.json</span></span></code></pre>\n<p>The JSON file is returned in Deepgram\u2019s format that offers the transcript as well as information about your transcription request. A quick way to view the transcript is to use the <code is:raw>jq</code> tool:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">jq .results.channels[0].alternatives[0].transcript n_tesla.json </span></span></code></pre>\n<p>\u2026and here\u2019s your transcript!</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">&quot;Nikola Tesla sees a wireless vision by anonymous the New York Times 3rd October 1915. This is a LeapRvox recording. All LeapRvox recordings are in the public domain. For more information or to volunteer, please visit LeapRvox.org. Nikola Tesla sees a wireless vision. Things his world system will allow hundreds to talk at once through the earth. Nikola Tesla responds static disturbance. Inventors hopes also to transmit pictures by the same medium which carries the voice. Nikola Tesla announced to the Times last night that he had received a patent on an invention which would not only eliminate static interference, the present bugaboo of wireless telephony, but would enable thousands of persons to talk at once between wireless stations and make it possible for those talking to see one another by wireless, regardless of the distance separating them. </span></span>\n<span class="line"><span style="color: #c9d1d9"></span></span>\n<span class="line"><span style="color: #c9d1d9">...</span></span>\n<span class="line"><span style="color: #c9d1d9"></span></span>\n<span class="line"><span style="color: #c9d1d9">Wireless is coming to mankind, and it&#39;s full meaning like a hurricane some of these days. Some day there will be, say, six great wireless telephone stations in a world system, connecting all the inhabitants on this earth to one another, not only by voice, but by sight. It&#39;s surely coming. End of Nikola Tesla sees a wireless vision by anonymous, the New York Times 3rd October 1915.&quot;</span></span></code></pre>\n<h2 id="but-wait-those-transcripts-arent-the-same">But Wait. Those Transcripts Aren\u2019t the Same.</h2>\n<p>Excellent observation! The local run was able to transcribe \u201CLibriVox,\u201D while the API call returned \u201CLeapRvox.\u201D This is an artifact of this kind of model - their results are not deterministic. That is, some optimizations for working with large quantities of audio depend on overall system state and do not produce precisely the same output between runs. Our observations are that the resulting differential is typically on the order of 1% (absolute) fluctuations in word-error rate.</p>' };
const frontmatter = { "title": "How to Run OpenAI Whisper in the Command Line", "description": "In this blog, learn how to run the OpenAI Whisper speech recognition tool via Command-Line. Load it from the repository and get started now!", "date": "2022-10-04T14:53:35.183Z", "cover": "https://res.cloudinary.com/deepgram/image/upload/v1664561631/blog/how-to-run-openai-whisper-in-command-line/2209-How-to-Run-OpenAI-Whisper-in-Command-Line-featured-1200x630_2x_tnwda5.png", "authors": ["kate-weber"], "category": "tutorial", "tags": ["whisper", "machine-learning"], "shorturls": { "share": "https://dpgr.am/3b50e18", "twitter": "https://dpgr.am/62629ca", "linkedin": "https://dpgr.am/4c3b882", "reddit": "https://dpgr.am/75e494b", "facebook": "https://dpgr.am/f1b2079" }, "astro": { "headings": [{ "depth": 2, "slug": "setup", "text": "Setup" }, { "depth": 2, "slug": "using-the-tool", "text": "Using the Tool" }, { "depth": 2, "slug": "deepgrams-whisper-api-endpoint", "text": "Deepgram\u2019s Whisper API Endpoint" }, { "depth": 2, "slug": "but-wait-those-transcripts-arent-the-same", "text": "But Wait. Those Transcripts Aren\u2019t the Same." }], "source": "So, you want to run the OpenAI Whisper tool on your machine? You can load it from the [OpenAI Github](https://github.com/openai/whisper) repository to get up and going!\n\n## Setup\n\nYou'll need python on your machine, at least version 3.7. Let's set up a [virtual environment](https://realpython.com/python-virtual-environments-a-primer/) with venv (or conda or the like) if you want to isolate these experiments from other work.\n\n```shell\nmkdir whisper\ncd whisper\npython3 -m venv venv\nsource venv/bin/activate\n\n# always a good idea to make sure pip is up-to-date\npip3 install --upgrade pip\n```\n\nNext, install a clone of the Whisper package and its dependencies (torch, numpy, transformers, tqdm, more-itertools, and ffmpeg-python) into your python environment.\n\n```shell\npip3 install git+https://github.com/openai/whisper.git\n```\n\nEspecially if it's pulling `torch` for the first time, this may take a little while. The repository documentation advises that if you get errors building the wheel for `tokenizers`, you may also need to install `rust`. You'll also need `ffmpeg` - installation depends on your platform. Here are some examples:\n\n```shell\n# on Ubuntu or Debian\nsudo apt update && sudo apt install ffmpeg\n\n# on Arch Linux\nsudo pacman -S ffmpeg\n\n# on MacOS using Homebrew (https://brew.sh/)\nbrew install ffmpeg\n\n# on Windows using Chocolatey (https://chocolatey.org/)\nchoco install ffmpeg\n\n# on Windows using Scoop (https://scoop.sh/)\nscoop install ffmpeg\n```\n\n## Using the Tool\n\nGreat! You're ready to transcribe! In this example, we're working with Nicholas Tesla's vision of a wireless future - you can get [this audio file at the LibriVox archive](https://www.archive.org/download/nonfiction025_librivox/snf025_nikolateslawirelessvision_anonymous_gu.mp3) of public-domain audiobooks and bring it to your local machine if you don't have something queued up and ready to go.\n\nThe OpenAI Whisper tool has a variety of models that are English-only or multilingual, and come in a range of sizes whose tradeoffs are speed vs. performance. You can learn more about this [here](https://github.com/openai/whisper#available-models-and-languages). We, the researchers at Deepgram, have found that the small model provides a good balance.\n\n```shell\nwhisper \"snf025_nikolateslawirelessvision_anonymous_gu.mp3\" --model small --language English\n```\n\n```shell\n[00:00.000 --> 00:09.880]  Nikola Tesla sees a wireless vision by Anonymous, the New York Times, 3rd October, 1915.\n[00:09.880 --> 00:11.920]  This is a LibriVox recording.\n[00:11.920 --> 00:14.920]  All LibriVox recordings are in the public domain.\n[00:14.920 --> 00:20.200]  For more information or to volunteer, please visit LibriVox.org.\n[00:20.200 --> 00:23.760]  Nikola Tesla sees a wireless vision.\n[00:23.760 --> 00:29.080]  Things his world system will allow hundreds to talk at once through the Earth.\n[00:29.080 --> 00:31.760]  Trans-static disturbance.\n[00:31.760 --> 00:37.480]  Inventor hopes also to transmit pictures by the same medium which carries the voice.\n[00:37.480 --> 00:43.880]  Nikola Tesla announced to the Times last night that he had received a patent on an invention\n[00:43.880 --> 00:50.320]  which would not only eliminate static interference, the present bugaboo of wireless telephony,\n[00:50.320 --> 00:55.520]  but would enable thousands of persons to talk at once between wireless stations and make\n[00:55.520 --> 01:01.920]  it possible for those talking to see one another by wireless regardless of the distance separating\n\n...\n\n[07:25.160 --> 07:30.520]  Wireless is coming to mankind in its full meaning like a hurricane some of these days.\n[07:30.520 --> 07:36.120]  Some day there will be, say, six great wireless telephone stations in a world system connecting\n[07:36.120 --> 07:42.080]  all the inhabitants on this earth to one another, not only by voice, but by sight.\n[07:42.080 --> 07:45.240]  Its surely coming.\n[07:45.240 --> 07:50.940]  End of Nikola Tesla sees a wireless vision by Anonymous, The New York Times, 3rd October\n[07:50.940 --> 08:13.840]  1915.\n```\n\n## Deepgram's Whisper API Endpoint\n\nGetting the Whisper tool working on your machine may require some fiddly work with dependencies - especially for Torch and any existing software running your GPU.  Our [OpenAI Whisper API endpoint](https://deepgram.com/openai-whisper/) is easy to work with on the command-line - you can use `curl` to quickly send audio to our API.\n\nThis call will send your file to the API and save it to a local JSON file called `n_tesla.json`:\n\n```shell\ncurl --request POST \\\n  --upload-file snf025_nikolateslawirelessvision_anonymous_gu.mp3 \\\n  --url 'https://api.deepgram.com/v1/listen?model=whisper' \\\n  --output n_tesla.json\n```\n\nThe JSON file is returned in Deepgram's format that offers the transcript as well as information about your transcription request. A quick way to view the transcript is to use the `jq` tool:\n\n```shell\njq .results.channels[0].alternatives[0].transcript n_tesla.json \n```\n\n...and here's your transcript!\n\n```text\n\"Nikola Tesla sees a wireless vision by anonymous the New York Times 3rd October 1915. This is a LeapRvox recording. All LeapRvox recordings are in the public domain. For more information or to volunteer, please visit LeapRvox.org. Nikola Tesla sees a wireless vision. Things his world system will allow hundreds to talk at once through the earth. Nikola Tesla responds static disturbance. Inventors hopes also to transmit pictures by the same medium which carries the voice. Nikola Tesla announced to the Times last night that he had received a patent on an invention which would not only eliminate static interference, the present bugaboo of wireless telephony, but would enable thousands of persons to talk at once between wireless stations and make it possible for those talking to see one another by wireless, regardless of the distance separating them. \n\n...\n\nWireless is coming to mankind, and it's full meaning like a hurricane some of these days. Some day there will be, say, six great wireless telephone stations in a world system, connecting all the inhabitants on this earth to one another, not only by voice, but by sight. It's surely coming. End of Nikola Tesla sees a wireless vision by anonymous, the New York Times 3rd October 1915.\"\n```\n\n## But Wait. Those Transcripts Aren't the Same.\n\nExcellent observation! The local run was able to transcribe \"LibriVox,\" while the API call returned \"LeapRvox.\" This is an artifact of this kind of model - their results are not deterministic. That is, some optimizations for working with large quantities of audio depend on overall system state and do not produce precisely the same output between runs. Our observations are that the resulting differential is typically on the order of 1% (absolute) fluctuations in word-error rate.", "html": '<p>So, you want to run the OpenAI Whisper tool on your machine? You can load it from the <a href="https://github.com/openai/whisper">OpenAI Github</a> repository to get up and going!</p>\n<h2 id="setup">Setup</h2>\n<p>You\u2019ll need python on your machine, at least version 3.7. Let\u2019s set up a <a href="https://realpython.com/python-virtual-environments-a-primer/">virtual environment</a> with venv (or conda or the like) if you want to isolate these experiments from other work.</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">mkdir whisper</span></span>\n<span class="line"><span style="color: #79C0FF">cd</span><span style="color: #C9D1D9"> whisper</span></span>\n<span class="line"><span style="color: #C9D1D9">python3 -m venv venv</span></span>\n<span class="line"><span style="color: #79C0FF">source</span><span style="color: #C9D1D9"> venv/bin/activate</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># always a good idea to make sure pip is up-to-date</span></span>\n<span class="line"><span style="color: #C9D1D9">pip3 install --upgrade pip</span></span></code></pre>\n<p>Next, install a clone of the Whisper package and its dependencies (torch, numpy, transformers, tqdm, more-itertools, and ffmpeg-python) into your python environment.</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">pip3 install git+https://github.com/openai/whisper.git</span></span></code></pre>\n<p>Especially if it\u2019s pulling <code is:raw>torch</code> for the first time, this may take a little while. The repository documentation advises that if you get errors building the wheel for <code is:raw>tokenizers</code>, you may also need to install <code is:raw>rust</code>. You\u2019ll also need <code is:raw>ffmpeg</code> - installation depends on your platform. Here are some examples:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #8B949E"># on Ubuntu or Debian</span></span>\n<span class="line"><span style="color: #C9D1D9">sudo apt update </span><span style="color: #FF7B72">&amp;&amp;</span><span style="color: #C9D1D9"> sudo apt install ffmpeg</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># on Arch Linux</span></span>\n<span class="line"><span style="color: #C9D1D9">sudo pacman -S ffmpeg</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># on MacOS using Homebrew (https://brew.sh/)</span></span>\n<span class="line"><span style="color: #C9D1D9">brew install ffmpeg</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># on Windows using Chocolatey (https://chocolatey.org/)</span></span>\n<span class="line"><span style="color: #C9D1D9">choco install ffmpeg</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># on Windows using Scoop (https://scoop.sh/)</span></span>\n<span class="line"><span style="color: #C9D1D9">scoop install ffmpeg</span></span></code></pre>\n<h2 id="using-the-tool">Using the Tool</h2>\n<p>Great! You\u2019re ready to transcribe! In this example, we\u2019re working with Nicholas Tesla\u2019s vision of a wireless future - you can get <a href="https://www.archive.org/download/nonfiction025_librivox/snf025_nikolateslawirelessvision_anonymous_gu.mp3">this audio file at the LibriVox archive</a> of public-domain audiobooks and bring it to your local machine if you don\u2019t have something queued up and ready to go.</p>\n<p>The OpenAI Whisper tool has a variety of models that are English-only or multilingual, and come in a range of sizes whose tradeoffs are speed vs. performance. You can learn more about this <a href="https://github.com/openai/whisper#available-models-and-languages">here</a>. We, the researchers at Deepgram, have found that the small model provides a good balance.</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">whisper </span><span style="color: #A5D6FF">&quot;snf025_nikolateslawirelessvision_anonymous_gu.mp3&quot;</span><span style="color: #C9D1D9"> --model small --language English</span></span></code></pre>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">[00:00.000 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:09.880]  Nikola Tesla sees a wireless vision by Anonymous, the New York Times, 3rd October, 1915.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:09.880 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:11.920]  This is a LibriVox recording.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:11.920 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:14.920]  All LibriVox recordings are </span><span style="color: #FF7B72">in</span><span style="color: #C9D1D9"> the public domain.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:14.920 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:20.200]  For more information or to volunteer, please visit LibriVox.org.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:20.200 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:23.760]  Nikola Tesla sees a wireless vision.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:23.760 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:29.080]  Things his world system will allow hundreds to talk at once through the Earth.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:29.080 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:31.760]  Trans-static disturbance.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:31.760 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:37.480]  Inventor hopes also to transmit pictures by the same medium which carries the voice.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:37.480 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:43.880]  Nikola Tesla announced to the Times last night that he had received a patent on an invention</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:43.880 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:50.320]  which would not only eliminate static interference, the present bugaboo of wireless telephony,</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:50.320 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:55.520]  but would </span><span style="color: #79C0FF">enable</span><span style="color: #C9D1D9"> thousands of persons to talk at once between wireless stations and make</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:55.520 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 01:01.920]  it possible </span><span style="color: #FF7B72">for</span><span style="color: #C9D1D9"> those talking to see one another by wireless regardless of the distance separating</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #C9D1D9">...</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #C9D1D9">[07:25.160 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:30.520]  Wireless is coming to mankind </span><span style="color: #FF7B72">in</span><span style="color: #C9D1D9"> its full meaning like a hurricane some of these days.</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:30.520 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:36.120]  Some day there will be, say, six great wireless telephone stations </span><span style="color: #FF7B72">in</span><span style="color: #C9D1D9"> a world system connecting</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:36.120 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:42.080]  all the inhabitants on this earth to one another, not only by voice, but by sight.</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:42.080 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:45.240]  Its surely coming.</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:45.240 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:50.940]  End of Nikola Tesla sees a wireless vision by Anonymous, The New York Times, 3rd October</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:50.940 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 08:13.840]  1915.</span></span></code></pre>\n<h2 id="deepgrams-whisper-api-endpoint">Deepgram\u2019s Whisper API Endpoint</h2>\n<p>Getting the Whisper tool working on your machine may require some fiddly work with dependencies - especially for Torch and any existing software running your GPU.  Our <a href="https://deepgram.com/openai-whisper/">OpenAI Whisper API endpoint</a> is easy to work with on the command-line - you can use <code is:raw>curl</code> to quickly send audio to our API.</p>\n<p>This call will send your file to the API and save it to a local JSON file called <code is:raw>n_tesla.json</code>:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">curl --request POST \\</span></span>\n<span class="line"><span style="color: #C9D1D9">  --upload-file snf025_nikolateslawirelessvision_anonymous_gu.mp3 \\</span></span>\n<span class="line"><span style="color: #C9D1D9">  --url </span><span style="color: #A5D6FF">&#39;https://api.deepgram.com/v1/listen?model=whisper&#39;</span><span style="color: #C9D1D9"> \\</span></span>\n<span class="line"><span style="color: #C9D1D9">  --output n_tesla.json</span></span></code></pre>\n<p>The JSON file is returned in Deepgram\u2019s format that offers the transcript as well as information about your transcription request. A quick way to view the transcript is to use the <code is:raw>jq</code> tool:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">jq .results.channels[0].alternatives[0].transcript n_tesla.json </span></span></code></pre>\n<p>\u2026and here\u2019s your transcript!</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">&quot;Nikola Tesla sees a wireless vision by anonymous the New York Times 3rd October 1915. This is a LeapRvox recording. All LeapRvox recordings are in the public domain. For more information or to volunteer, please visit LeapRvox.org. Nikola Tesla sees a wireless vision. Things his world system will allow hundreds to talk at once through the earth. Nikola Tesla responds static disturbance. Inventors hopes also to transmit pictures by the same medium which carries the voice. Nikola Tesla announced to the Times last night that he had received a patent on an invention which would not only eliminate static interference, the present bugaboo of wireless telephony, but would enable thousands of persons to talk at once between wireless stations and make it possible for those talking to see one another by wireless, regardless of the distance separating them. </span></span>\n<span class="line"><span style="color: #c9d1d9"></span></span>\n<span class="line"><span style="color: #c9d1d9">...</span></span>\n<span class="line"><span style="color: #c9d1d9"></span></span>\n<span class="line"><span style="color: #c9d1d9">Wireless is coming to mankind, and it&#39;s full meaning like a hurricane some of these days. Some day there will be, say, six great wireless telephone stations in a world system, connecting all the inhabitants on this earth to one another, not only by voice, but by sight. It&#39;s surely coming. End of Nikola Tesla sees a wireless vision by anonymous, the New York Times 3rd October 1915.&quot;</span></span></code></pre>\n<h2 id="but-wait-those-transcripts-arent-the-same">But Wait. Those Transcripts Aren\u2019t the Same.</h2>\n<p>Excellent observation! The local run was able to transcribe \u201CLibriVox,\u201D while the API call returned \u201CLeapRvox.\u201D This is an artifact of this kind of model - their results are not deterministic. That is, some optimizations for working with large quantities of audio depend on overall system state and do not produce precisely the same output between runs. Our observations are that the resulting differential is typically on the order of 1% (absolute) fluctuations in word-error rate.</p>' }, "file": "/Users/sandrarodgers/web-next/blog/src/content/blog/posts/how-to-run-openai-whisper-in-command-line/index.md" };
function rawContent() {
  return "So, you want to run the OpenAI Whisper tool on your machine? You can load it from the [OpenAI Github](https://github.com/openai/whisper) repository to get up and going!\n\n## Setup\n\nYou'll need python on your machine, at least version 3.7. Let's set up a [virtual environment](https://realpython.com/python-virtual-environments-a-primer/) with venv (or conda or the like) if you want to isolate these experiments from other work.\n\n```shell\nmkdir whisper\ncd whisper\npython3 -m venv venv\nsource venv/bin/activate\n\n# always a good idea to make sure pip is up-to-date\npip3 install --upgrade pip\n```\n\nNext, install a clone of the Whisper package and its dependencies (torch, numpy, transformers, tqdm, more-itertools, and ffmpeg-python) into your python environment.\n\n```shell\npip3 install git+https://github.com/openai/whisper.git\n```\n\nEspecially if it's pulling `torch` for the first time, this may take a little while. The repository documentation advises that if you get errors building the wheel for `tokenizers`, you may also need to install `rust`. You'll also need `ffmpeg` - installation depends on your platform. Here are some examples:\n\n```shell\n# on Ubuntu or Debian\nsudo apt update && sudo apt install ffmpeg\n\n# on Arch Linux\nsudo pacman -S ffmpeg\n\n# on MacOS using Homebrew (https://brew.sh/)\nbrew install ffmpeg\n\n# on Windows using Chocolatey (https://chocolatey.org/)\nchoco install ffmpeg\n\n# on Windows using Scoop (https://scoop.sh/)\nscoop install ffmpeg\n```\n\n## Using the Tool\n\nGreat! You're ready to transcribe! In this example, we're working with Nicholas Tesla's vision of a wireless future - you can get [this audio file at the LibriVox archive](https://www.archive.org/download/nonfiction025_librivox/snf025_nikolateslawirelessvision_anonymous_gu.mp3) of public-domain audiobooks and bring it to your local machine if you don't have something queued up and ready to go.\n\nThe OpenAI Whisper tool has a variety of models that are English-only or multilingual, and come in a range of sizes whose tradeoffs are speed vs. performance. You can learn more about this [here](https://github.com/openai/whisper#available-models-and-languages). We, the researchers at Deepgram, have found that the small model provides a good balance.\n\n```shell\nwhisper \"snf025_nikolateslawirelessvision_anonymous_gu.mp3\" --model small --language English\n```\n\n```shell\n[00:00.000 --> 00:09.880]  Nikola Tesla sees a wireless vision by Anonymous, the New York Times, 3rd October, 1915.\n[00:09.880 --> 00:11.920]  This is a LibriVox recording.\n[00:11.920 --> 00:14.920]  All LibriVox recordings are in the public domain.\n[00:14.920 --> 00:20.200]  For more information or to volunteer, please visit LibriVox.org.\n[00:20.200 --> 00:23.760]  Nikola Tesla sees a wireless vision.\n[00:23.760 --> 00:29.080]  Things his world system will allow hundreds to talk at once through the Earth.\n[00:29.080 --> 00:31.760]  Trans-static disturbance.\n[00:31.760 --> 00:37.480]  Inventor hopes also to transmit pictures by the same medium which carries the voice.\n[00:37.480 --> 00:43.880]  Nikola Tesla announced to the Times last night that he had received a patent on an invention\n[00:43.880 --> 00:50.320]  which would not only eliminate static interference, the present bugaboo of wireless telephony,\n[00:50.320 --> 00:55.520]  but would enable thousands of persons to talk at once between wireless stations and make\n[00:55.520 --> 01:01.920]  it possible for those talking to see one another by wireless regardless of the distance separating\n\n...\n\n[07:25.160 --> 07:30.520]  Wireless is coming to mankind in its full meaning like a hurricane some of these days.\n[07:30.520 --> 07:36.120]  Some day there will be, say, six great wireless telephone stations in a world system connecting\n[07:36.120 --> 07:42.080]  all the inhabitants on this earth to one another, not only by voice, but by sight.\n[07:42.080 --> 07:45.240]  Its surely coming.\n[07:45.240 --> 07:50.940]  End of Nikola Tesla sees a wireless vision by Anonymous, The New York Times, 3rd October\n[07:50.940 --> 08:13.840]  1915.\n```\n\n## Deepgram's Whisper API Endpoint\n\nGetting the Whisper tool working on your machine may require some fiddly work with dependencies - especially for Torch and any existing software running your GPU.  Our [OpenAI Whisper API endpoint](https://deepgram.com/openai-whisper/) is easy to work with on the command-line - you can use `curl` to quickly send audio to our API.\n\nThis call will send your file to the API and save it to a local JSON file called `n_tesla.json`:\n\n```shell\ncurl --request POST \\\n  --upload-file snf025_nikolateslawirelessvision_anonymous_gu.mp3 \\\n  --url 'https://api.deepgram.com/v1/listen?model=whisper' \\\n  --output n_tesla.json\n```\n\nThe JSON file is returned in Deepgram's format that offers the transcript as well as information about your transcription request. A quick way to view the transcript is to use the `jq` tool:\n\n```shell\njq .results.channels[0].alternatives[0].transcript n_tesla.json \n```\n\n...and here's your transcript!\n\n```text\n\"Nikola Tesla sees a wireless vision by anonymous the New York Times 3rd October 1915. This is a LeapRvox recording. All LeapRvox recordings are in the public domain. For more information or to volunteer, please visit LeapRvox.org. Nikola Tesla sees a wireless vision. Things his world system will allow hundreds to talk at once through the earth. Nikola Tesla responds static disturbance. Inventors hopes also to transmit pictures by the same medium which carries the voice. Nikola Tesla announced to the Times last night that he had received a patent on an invention which would not only eliminate static interference, the present bugaboo of wireless telephony, but would enable thousands of persons to talk at once between wireless stations and make it possible for those talking to see one another by wireless, regardless of the distance separating them. \n\n...\n\nWireless is coming to mankind, and it's full meaning like a hurricane some of these days. Some day there will be, say, six great wireless telephone stations in a world system, connecting all the inhabitants on this earth to one another, not only by voice, but by sight. It's surely coming. End of Nikola Tesla sees a wireless vision by anonymous, the New York Times 3rd October 1915.\"\n```\n\n## But Wait. Those Transcripts Aren't the Same.\n\nExcellent observation! The local run was able to transcribe \"LibriVox,\" while the API call returned \"LeapRvox.\" This is an artifact of this kind of model - their results are not deterministic. That is, some optimizations for working with large quantities of audio depend on overall system state and do not produce precisely the same output between runs. Our observations are that the resulting differential is typically on the order of 1% (absolute) fluctuations in word-error rate.";
}
function compiledContent() {
  return '<p>So, you want to run the OpenAI Whisper tool on your machine? You can load it from the <a href="https://github.com/openai/whisper">OpenAI Github</a> repository to get up and going!</p>\n<h2 id="setup">Setup</h2>\n<p>You\u2019ll need python on your machine, at least version 3.7. Let\u2019s set up a <a href="https://realpython.com/python-virtual-environments-a-primer/">virtual environment</a> with venv (or conda or the like) if you want to isolate these experiments from other work.</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">mkdir whisper</span></span>\n<span class="line"><span style="color: #79C0FF">cd</span><span style="color: #C9D1D9"> whisper</span></span>\n<span class="line"><span style="color: #C9D1D9">python3 -m venv venv</span></span>\n<span class="line"><span style="color: #79C0FF">source</span><span style="color: #C9D1D9"> venv/bin/activate</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># always a good idea to make sure pip is up-to-date</span></span>\n<span class="line"><span style="color: #C9D1D9">pip3 install --upgrade pip</span></span></code></pre>\n<p>Next, install a clone of the Whisper package and its dependencies (torch, numpy, transformers, tqdm, more-itertools, and ffmpeg-python) into your python environment.</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">pip3 install git+https://github.com/openai/whisper.git</span></span></code></pre>\n<p>Especially if it\u2019s pulling <code is:raw>torch</code> for the first time, this may take a little while. The repository documentation advises that if you get errors building the wheel for <code is:raw>tokenizers</code>, you may also need to install <code is:raw>rust</code>. You\u2019ll also need <code is:raw>ffmpeg</code> - installation depends on your platform. Here are some examples:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #8B949E"># on Ubuntu or Debian</span></span>\n<span class="line"><span style="color: #C9D1D9">sudo apt update </span><span style="color: #FF7B72">&amp;&amp;</span><span style="color: #C9D1D9"> sudo apt install ffmpeg</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># on Arch Linux</span></span>\n<span class="line"><span style="color: #C9D1D9">sudo pacman -S ffmpeg</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># on MacOS using Homebrew (https://brew.sh/)</span></span>\n<span class="line"><span style="color: #C9D1D9">brew install ffmpeg</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># on Windows using Chocolatey (https://chocolatey.org/)</span></span>\n<span class="line"><span style="color: #C9D1D9">choco install ffmpeg</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #8B949E"># on Windows using Scoop (https://scoop.sh/)</span></span>\n<span class="line"><span style="color: #C9D1D9">scoop install ffmpeg</span></span></code></pre>\n<h2 id="using-the-tool">Using the Tool</h2>\n<p>Great! You\u2019re ready to transcribe! In this example, we\u2019re working with Nicholas Tesla\u2019s vision of a wireless future - you can get <a href="https://www.archive.org/download/nonfiction025_librivox/snf025_nikolateslawirelessvision_anonymous_gu.mp3">this audio file at the LibriVox archive</a> of public-domain audiobooks and bring it to your local machine if you don\u2019t have something queued up and ready to go.</p>\n<p>The OpenAI Whisper tool has a variety of models that are English-only or multilingual, and come in a range of sizes whose tradeoffs are speed vs. performance. You can learn more about this <a href="https://github.com/openai/whisper#available-models-and-languages">here</a>. We, the researchers at Deepgram, have found that the small model provides a good balance.</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">whisper </span><span style="color: #A5D6FF">&quot;snf025_nikolateslawirelessvision_anonymous_gu.mp3&quot;</span><span style="color: #C9D1D9"> --model small --language English</span></span></code></pre>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">[00:00.000 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:09.880]  Nikola Tesla sees a wireless vision by Anonymous, the New York Times, 3rd October, 1915.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:09.880 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:11.920]  This is a LibriVox recording.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:11.920 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:14.920]  All LibriVox recordings are </span><span style="color: #FF7B72">in</span><span style="color: #C9D1D9"> the public domain.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:14.920 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:20.200]  For more information or to volunteer, please visit LibriVox.org.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:20.200 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:23.760]  Nikola Tesla sees a wireless vision.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:23.760 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:29.080]  Things his world system will allow hundreds to talk at once through the Earth.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:29.080 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:31.760]  Trans-static disturbance.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:31.760 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:37.480]  Inventor hopes also to transmit pictures by the same medium which carries the voice.</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:37.480 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:43.880]  Nikola Tesla announced to the Times last night that he had received a patent on an invention</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:43.880 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:50.320]  which would not only eliminate static interference, the present bugaboo of wireless telephony,</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:50.320 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:55.520]  but would </span><span style="color: #79C0FF">enable</span><span style="color: #C9D1D9"> thousands of persons to talk at once between wireless stations and make</span></span>\n<span class="line"><span style="color: #C9D1D9">[00:55.520 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 01:01.920]  it possible </span><span style="color: #FF7B72">for</span><span style="color: #C9D1D9"> those talking to see one another by wireless regardless of the distance separating</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #C9D1D9">...</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #C9D1D9">[07:25.160 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:30.520]  Wireless is coming to mankind </span><span style="color: #FF7B72">in</span><span style="color: #C9D1D9"> its full meaning like a hurricane some of these days.</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:30.520 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:36.120]  Some day there will be, say, six great wireless telephone stations </span><span style="color: #FF7B72">in</span><span style="color: #C9D1D9"> a world system connecting</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:36.120 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:42.080]  all the inhabitants on this earth to one another, not only by voice, but by sight.</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:42.080 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:45.240]  Its surely coming.</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:45.240 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:50.940]  End of Nikola Tesla sees a wireless vision by Anonymous, The New York Times, 3rd October</span></span>\n<span class="line"><span style="color: #C9D1D9">[07:50.940 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 08:13.840]  1915.</span></span></code></pre>\n<h2 id="deepgrams-whisper-api-endpoint">Deepgram\u2019s Whisper API Endpoint</h2>\n<p>Getting the Whisper tool working on your machine may require some fiddly work with dependencies - especially for Torch and any existing software running your GPU.  Our <a href="https://deepgram.com/openai-whisper/">OpenAI Whisper API endpoint</a> is easy to work with on the command-line - you can use <code is:raw>curl</code> to quickly send audio to our API.</p>\n<p>This call will send your file to the API and save it to a local JSON file called <code is:raw>n_tesla.json</code>:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">curl --request POST \\</span></span>\n<span class="line"><span style="color: #C9D1D9">  --upload-file snf025_nikolateslawirelessvision_anonymous_gu.mp3 \\</span></span>\n<span class="line"><span style="color: #C9D1D9">  --url </span><span style="color: #A5D6FF">&#39;https://api.deepgram.com/v1/listen?model=whisper&#39;</span><span style="color: #C9D1D9"> \\</span></span>\n<span class="line"><span style="color: #C9D1D9">  --output n_tesla.json</span></span></code></pre>\n<p>The JSON file is returned in Deepgram\u2019s format that offers the transcript as well as information about your transcription request. A quick way to view the transcript is to use the <code is:raw>jq</code> tool:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">jq .results.channels[0].alternatives[0].transcript n_tesla.json </span></span></code></pre>\n<p>\u2026and here\u2019s your transcript!</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">&quot;Nikola Tesla sees a wireless vision by anonymous the New York Times 3rd October 1915. This is a LeapRvox recording. All LeapRvox recordings are in the public domain. For more information or to volunteer, please visit LeapRvox.org. Nikola Tesla sees a wireless vision. Things his world system will allow hundreds to talk at once through the earth. Nikola Tesla responds static disturbance. Inventors hopes also to transmit pictures by the same medium which carries the voice. Nikola Tesla announced to the Times last night that he had received a patent on an invention which would not only eliminate static interference, the present bugaboo of wireless telephony, but would enable thousands of persons to talk at once between wireless stations and make it possible for those talking to see one another by wireless, regardless of the distance separating them. </span></span>\n<span class="line"><span style="color: #c9d1d9"></span></span>\n<span class="line"><span style="color: #c9d1d9">...</span></span>\n<span class="line"><span style="color: #c9d1d9"></span></span>\n<span class="line"><span style="color: #c9d1d9">Wireless is coming to mankind, and it&#39;s full meaning like a hurricane some of these days. Some day there will be, say, six great wireless telephone stations in a world system, connecting all the inhabitants on this earth to one another, not only by voice, but by sight. It&#39;s surely coming. End of Nikola Tesla sees a wireless vision by anonymous, the New York Times 3rd October 1915.&quot;</span></span></code></pre>\n<h2 id="but-wait-those-transcripts-arent-the-same">But Wait. Those Transcripts Aren\u2019t the Same.</h2>\n<p>Excellent observation! The local run was able to transcribe \u201CLibriVox,\u201D while the API call returned \u201CLeapRvox.\u201D This is an artifact of this kind of model - their results are not deterministic. That is, some optimizations for working with large quantities of audio depend on overall system state and do not produce precisely the same output between runs. Our observations are that the resulting differential is typically on the order of 1% (absolute) fluctuations in word-error rate.</p>';
}
const $$Astro = createAstro("/Users/sandrarodgers/web-next/blog/src/content/blog/posts/how-to-run-openai-whisper-in-command-line/index.md", "", "file:///Users/sandrarodgers/web-next/blog/");
const $$Index = createComponent(async ($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$Index;
  new Slugger();
  return renderTemplate`<head>${renderHead($$result)}</head><p>So, you want to run the OpenAI Whisper tool on your machine? You can load it from the <a href="https://github.com/openai/whisper">OpenAI Github</a> repository to get up and going!</p>
<h2 id="setup">Setup</h2>
<p>Youll need python on your machine, at least version 3.7. Lets set up a <a href="https://realpython.com/python-virtual-environments-a-primer/">virtual environment</a> with venv (or conda or the like) if you want to isolate these experiments from other work.</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">mkdir whisper</span></span>
<span class="line"><span style="color: #79C0FF">cd</span><span style="color: #C9D1D9"> whisper</span></span>
<span class="line"><span style="color: #C9D1D9">python3 -m venv venv</span></span>
<span class="line"><span style="color: #79C0FF">source</span><span style="color: #C9D1D9"> venv/bin/activate</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># always a good idea to make sure pip is up-to-date</span></span>
<span class="line"><span style="color: #C9D1D9">pip3 install --upgrade pip</span></span></code></pre>
<p>Next, install a clone of the Whisper package and its dependencies (torch, numpy, transformers, tqdm, more-itertools, and ffmpeg-python) into your python environment.</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">pip3 install git+https://github.com/openai/whisper.git</span></span></code></pre>
<p>Especially if its pulling <code>torch</code> for the first time, this may take a little while. The repository documentation advises that if you get errors building the wheel for <code>tokenizers</code>, you may also need to install <code>rust</code>. Youll also need <code>ffmpeg</code> - installation depends on your platform. Here are some examples:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #8B949E"># on Ubuntu or Debian</span></span>
<span class="line"><span style="color: #C9D1D9">sudo apt update </span><span style="color: #FF7B72">&amp;&amp;</span><span style="color: #C9D1D9"> sudo apt install ffmpeg</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># on Arch Linux</span></span>
<span class="line"><span style="color: #C9D1D9">sudo pacman -S ffmpeg</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># on MacOS using Homebrew (https://brew.sh/)</span></span>
<span class="line"><span style="color: #C9D1D9">brew install ffmpeg</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># on Windows using Chocolatey (https://chocolatey.org/)</span></span>
<span class="line"><span style="color: #C9D1D9">choco install ffmpeg</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># on Windows using Scoop (https://scoop.sh/)</span></span>
<span class="line"><span style="color: #C9D1D9">scoop install ffmpeg</span></span></code></pre>
<h2 id="using-the-tool">Using the Tool</h2>
<p>Great! Youre ready to transcribe! In this example, were working with Nicholas Teslas vision of a wireless future - you can get <a href="https://www.archive.org/download/nonfiction025_librivox/snf025_nikolateslawirelessvision_anonymous_gu.mp3">this audio file at the LibriVox archive</a> of public-domain audiobooks and bring it to your local machine if you dont have something queued up and ready to go.</p>
<p>The OpenAI Whisper tool has a variety of models that are English-only or multilingual, and come in a range of sizes whose tradeoffs are speed vs. performance. You can learn more about this <a href="https://github.com/openai/whisper#available-models-and-languages">here</a>. We, the researchers at Deepgram, have found that the small model provides a good balance.</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">whisper </span><span style="color: #A5D6FF">&quot;snf025_nikolateslawirelessvision_anonymous_gu.mp3&quot;</span><span style="color: #C9D1D9"> --model small --language English</span></span></code></pre>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">[00:00.000 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:09.880]  Nikola Tesla sees a wireless vision by Anonymous, the New York Times, 3rd October, 1915.</span></span>
<span class="line"><span style="color: #C9D1D9">[00:09.880 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:11.920]  This is a LibriVox recording.</span></span>
<span class="line"><span style="color: #C9D1D9">[00:11.920 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:14.920]  All LibriVox recordings are </span><span style="color: #FF7B72">in</span><span style="color: #C9D1D9"> the public domain.</span></span>
<span class="line"><span style="color: #C9D1D9">[00:14.920 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:20.200]  For more information or to volunteer, please visit LibriVox.org.</span></span>
<span class="line"><span style="color: #C9D1D9">[00:20.200 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:23.760]  Nikola Tesla sees a wireless vision.</span></span>
<span class="line"><span style="color: #C9D1D9">[00:23.760 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:29.080]  Things his world system will allow hundreds to talk at once through the Earth.</span></span>
<span class="line"><span style="color: #C9D1D9">[00:29.080 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:31.760]  Trans-static disturbance.</span></span>
<span class="line"><span style="color: #C9D1D9">[00:31.760 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:37.480]  Inventor hopes also to transmit pictures by the same medium which carries the voice.</span></span>
<span class="line"><span style="color: #C9D1D9">[00:37.480 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:43.880]  Nikola Tesla announced to the Times last night that he had received a patent on an invention</span></span>
<span class="line"><span style="color: #C9D1D9">[00:43.880 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:50.320]  which would not only eliminate static interference, the present bugaboo of wireless telephony,</span></span>
<span class="line"><span style="color: #C9D1D9">[00:50.320 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 00:55.520]  but would </span><span style="color: #79C0FF">enable</span><span style="color: #C9D1D9"> thousands of persons to talk at once between wireless stations and make</span></span>
<span class="line"><span style="color: #C9D1D9">[00:55.520 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 01:01.920]  it possible </span><span style="color: #FF7B72">for</span><span style="color: #C9D1D9"> those talking to see one another by wireless regardless of the distance separating</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">[07:25.160 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:30.520]  Wireless is coming to mankind </span><span style="color: #FF7B72">in</span><span style="color: #C9D1D9"> its full meaning like a hurricane some of these days.</span></span>
<span class="line"><span style="color: #C9D1D9">[07:30.520 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:36.120]  Some day there will be, say, six great wireless telephone stations </span><span style="color: #FF7B72">in</span><span style="color: #C9D1D9"> a world system connecting</span></span>
<span class="line"><span style="color: #C9D1D9">[07:36.120 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:42.080]  all the inhabitants on this earth to one another, not only by voice, but by sight.</span></span>
<span class="line"><span style="color: #C9D1D9">[07:42.080 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:45.240]  Its surely coming.</span></span>
<span class="line"><span style="color: #C9D1D9">[07:45.240 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 07:50.940]  End of Nikola Tesla sees a wireless vision by Anonymous, The New York Times, 3rd October</span></span>
<span class="line"><span style="color: #C9D1D9">[07:50.940 --</span><span style="color: #FF7B72">&gt;</span><span style="color: #C9D1D9"> 08:13.840]  1915.</span></span></code></pre>
<h2 id="deepgrams-whisper-api-endpoint">Deepgrams Whisper API Endpoint</h2>
<p>Getting the Whisper tool working on your machine may require some fiddly work with dependencies - especially for Torch and any existing software running your GPU.  Our <a href="https://deepgram.com/openai-whisper/">OpenAI Whisper API endpoint</a> is easy to work with on the command-line - you can use <code>curl</code> to quickly send audio to our API.</p>
<p>This call will send your file to the API and save it to a local JSON file called <code>n_tesla.json</code>:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">curl --request POST \\</span></span>
<span class="line"><span style="color: #C9D1D9">  --upload-file snf025_nikolateslawirelessvision_anonymous_gu.mp3 \\</span></span>
<span class="line"><span style="color: #C9D1D9">  --url </span><span style="color: #A5D6FF">&#39;https://api.deepgram.com/v1/listen?model=whisper&#39;</span><span style="color: #C9D1D9"> \\</span></span>
<span class="line"><span style="color: #C9D1D9">  --output n_tesla.json</span></span></code></pre>
<p>The JSON file is returned in Deepgrams format that offers the transcript as well as information about your transcription request. A quick way to view the transcript is to use the <code>jq</code> tool:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">jq .results.channels[0].alternatives[0].transcript n_tesla.json </span></span></code></pre>
<p>and heres your transcript!</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">&quot;Nikola Tesla sees a wireless vision by anonymous the New York Times 3rd October 1915. This is a LeapRvox recording. All LeapRvox recordings are in the public domain. For more information or to volunteer, please visit LeapRvox.org. Nikola Tesla sees a wireless vision. Things his world system will allow hundreds to talk at once through the earth. Nikola Tesla responds static disturbance. Inventors hopes also to transmit pictures by the same medium which carries the voice. Nikola Tesla announced to the Times last night that he had received a patent on an invention which would not only eliminate static interference, the present bugaboo of wireless telephony, but would enable thousands of persons to talk at once between wireless stations and make it possible for those talking to see one another by wireless, regardless of the distance separating them. </span></span>
<span class="line"><span style="color: #c9d1d9"></span></span>
<span class="line"><span style="color: #c9d1d9">...</span></span>
<span class="line"><span style="color: #c9d1d9"></span></span>
<span class="line"><span style="color: #c9d1d9">Wireless is coming to mankind, and it&#39;s full meaning like a hurricane some of these days. Some day there will be, say, six great wireless telephone stations in a world system, connecting all the inhabitants on this earth to one another, not only by voice, but by sight. It&#39;s surely coming. End of Nikola Tesla sees a wireless vision by anonymous, the New York Times 3rd October 1915.&quot;</span></span></code></pre>
<h2 id="but-wait-those-transcripts-arent-the-same">But Wait. Those Transcripts Arent the Same.</h2>
<p>Excellent observation! The local run was able to transcribe LibriVox, while the API call returned LeapRvox. This is an artifact of this kind of model - their results are not deterministic. That is, some optimizations for working with large quantities of audio depend on overall system state and do not produce precisely the same output between runs. Our observations are that the resulting differential is typically on the order of 1% (absolute) fluctuations in word-error rate.</p>`;
});

export { compiledContent, $$Index as default, frontmatter, metadata, rawContent };
